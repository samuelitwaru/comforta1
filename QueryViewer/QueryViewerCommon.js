function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var c=Object.keys(qv.collection)[0],c=qv.collection[c],a=JSON.parse(a),d=Object.keys(a),b=0;b<d.length;b++){var h=d[b];c[h]=a[h]}c.realShow()}
var HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],qv={collection:{},fadeTimeouts:{}},QueryViewerVisible={Always:"Always",Yes:"Yes",No:"No",Never:"Never"},QueryViewerElementType={Axis:"Axis",Datum:"Datum"},QueryViewerAxisType={Rows:"Rows",Columns:"Columns",Pages:"Pages"},QueryViewerFilterType={ShowAllValues:"ShowAllValues",HideAllValues:"HideAllValues",ShowSomeValues:"ShowSomeValues"},QueryViewerAxisOrderType={None:"None",Ascending:"Ascending",Descending:"Descending",
Custom:"Custom"},QueryViewerExpandCollapseType={ExpandAllValues:"ExpandAllValues",CollapseAllValues:"CollapseAllValues",ExpandSomeValues:"ExpandSomeValues"},QueryViewerDataType={Integer:"integer",Real:"real",Character:"character",Boolean:"boolean",Date:"date",DateTime:"datetime",GUID:"guid",GeoPoint:"geopoint"},QueryViewerAggregationType={Sum:"Sum",Average:"Average",Count:"Count",Max:"Max",Min:"Min"},QueryViewerOutputType={Card:"Card",Chart:"Chart",PivotTable:"PivotTable",Table:"Table",Map:"Map",
Default:"Default"},QueryViewerMapType={Choropleth:"Choropleth",Bubble:"Bubble"},QueryViewerRegion={Country:"Country",Continent:"Continent",World:"World"},QueryViewerContinent={SouthAmerica:"SouthAmerica",NorthAmerica:"NorthAmerica",Africa:"Africa",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Antarctica:"Antarctica"},QueryViewerCountry={AF:"AF",AL:"AL",DZ:"DZ",AD:"AD",AO:"AO",AI:"AI",AG:"AG",AR:"AR",AM:"AM",AU:"AU",AT:"AT",AZ:"AZ",BH:"BH",BD:"BD",BB:"BB",BY:"BY",BE:"BE",BZ:"BZ",BJ:"BJ",BM:"BM",BT:"BT",
BO:"BO",BA:"BA",BW:"BW",BR:"BR",VG:"VG",BN:"BN",BG:"BG",BF:"BF",BI:"BI",KH:"KH",CM:"CM",CA:"CA",CV:"CV",CF:"CF",TD:"TD",CL:"CL",CN:"CN",CO:"CO",KM:"KM",CK:"CK",CR:"CR",HR:"HR",CU:"CU",CY:"CY",CZ:"CZ",CD:"CD",DK:"DK",DJ:"DJ",DM:"DM",DO:"DO",TL:"TL",EC:"EC",EG:"EG",SV:"SV",GQ:"GQ",ER:"ER",EE:"EE",SZ:"SZ",ET:"ET",FO:"FO",FJ:"FJ",FI:"FI",FR:"FR",GA:"GA",GM:"GM",GE:"GE",DE:"DE",GH:"GH",GR:"GR",GL:"GL",GD:"GD",GT:"GT",GN:"GN",GW:"GW",GY:"GY",HT:"HT",HN:"HN",HU:"HU",IS:"IS",IN:"IN",ID:"ID",IR:"IR",IQ:"IQ",
IE:"IE",IL:"IL",IT:"IT",CI:"CI",JM:"JM",JP:"JP",JO:"JO",KZ:"KZ",KE:"KE",KI:"KI",XK:"XK",KW:"KW",KG:"KG",LA:"LA",LV:"LV",LB:"LB",LS:"LS",LR:"LR",LY:"LY",LI:"LI",LT:"LT",LU:"LU",MG:"MG",MW:"MW",MY:"MY",MV:"MV",ML:"ML",MT:"MT",MH:"MH",MR:"MR",MU:"MU",MX:"MX",FM:"FM",MD:"MD",MC:"MC",MN:"MN",ME:"ME",MA:"MA",MZ:"MZ",MM:"MM",NA:"NA",NR:"NR",NP:"NP",NL:"NL",NZ:"NZ",NI:"NI",NE:"NE",NG:"NG",KP:"KP",MK:"MK",NO:"NO",OM:"OM",PK:"PK",PW:"PW",PA:"PA",PS:"PS",PG:"PG",PY:"PY",PE:"PE",PH:"PH",PL:"PL",PT:"PT",PR:"PR",
QA:"QA",CG:"CG",RO:"RO",RU:"RU",RW:"RW",KN:"KN",LC:"LC",VC:"VC",WS:"WS",SM:"SM",ST:"ST",SA:"SA",SN:"SN",RS:"RS",SC:"SC",SL:"SL",SG:"SG",SK:"SK",SI:"SI",SB:"SB",SO:"SO",ZA:"ZA",KR:"KR",SS:"SS",ES:"ES",LK:"LK",SD:"SD",SR:"SR",SE:"SE",CH:"CH",SY:"SY",TW:"TW",TJ:"TJ",TZ:"TZ",TH:"TH",BS:"BS",TG:"TG",TK:"TK",TO:"TO",TT:"TT",TN:"TN",TR:"TR",TM:"TM",TV:"TV",UG:"UG",UA:"UA",AE:"AE",GB:"GB",US:"US",UY:"UY",UZ:"UZ",VU:"VU",VA:"VA",VE:"VE",VN:"VN",EH:"EH",YE:"YE",ZM:"ZM",ZW:"ZW"},QueryViewerMapLibrary={Highcharts:"Highcharts",
ECharts:"ECharts"},QueryViewerChartType={Column:"Column",Column3D:"Column3D",StackedColumn:"StackedColumn",StackedColumn3D:"StackedColumn3D",StackedColumn100:"StackedColumn100",Bar:"Bar",StackedBar:"StackedBar",StackedBar100:"StackedBar100",Area:"Area",StackedArea:"StackedArea",StackedArea100:"StackedArea100",SmoothArea:"SmoothArea",StepArea:"StepArea",Line:"Line",StackedLine:"StackedLine",StackedLine100:"StackedLine100",SmoothLine:"SmoothLine",StepLine:"StepLine",Pie:"Pie",Pie3D:"Pie3D",Doughnut:"Doughnut",
Doughnut3D:"Doughnut3D",LinearGauge:"LinearGauge",CircularGauge:"CircularGauge",Radar:"Radar",FilledRadar:"FilledRadar",PolarArea:"PolarArea",Funnel:"Funnel",Pyramid:"Pyramid",ColumnLine:"ColumnLine",Column3DLine:"Column3DLine",Timeline:"Timeline",SmoothTimeline:"SmoothTimeline",StepTimeline:"StepTimeline",Sparkline:"Sparkline"},QueryViewerConditionOperator={Equal:"EQ",LessThan:"LT",GreaterThan:"GT",LessOrEqual:"LE",GreaterOrEqual:"GE",NotEqual:"NE",Interval:"IN"},QueryViewerConditionOperatorSymbol=
{Equal:"=",LessThan:"<",GreaterThan:">",LessOrEqual:"≤",GreaterOrEqual:"≥",NotEqual:"<>",Interval:"-"},QueryViewerOrientation={Horizontal:"Horizontal",Vertical:"Vertical"},QueryViewerPlotSeries={InTheSameChart:"InTheSameChart",InSeparateCharts:"InSeparateCharts"},QueryViewerShowDataAs={Values:"Values",Percentages:"Percentages",ValuesAndPercentages:"ValuesAndPercentages"},QueryViewerSubtotals={Yes:"Yes",Hidden:"Hidden",No:"No"},QueryViewerTrendPeriod={SinceTheBeginning:"SinceTheBeginning",LastYear:"LastYear",
LastSemester:"LastSemester",LastQuarter:"LastQuarter",LastMonth:"LastMonth",LastWeek:"LastWeek",LastDay:"LastDay",LastHour:"LastHour",LastMinute:"LastMinute",LastSecond:"LastSecond"},QueryViewerXAxisLabels={Horizontally:"Horizontally",Rotated30:"Rotated30",Rotated45:"Rotated45",Rotated60:"Rotated60",Vertically:"Vertically"},QueryViewerAutoresizeType={Both:"Both",Vertical:"Vertical",Horizontal:"Horizontal"},QueryViewerTranslationType={NoTranslation:"None",Static:"Static",RunTime:"RunTime"},QueryViewerParentPanel=
{Default:"Default",QueryPreview:"QueryPreview",DashboardEditor:"DashboardEditor",MobileWrapper:"MobileWrapper"};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a},
IsHexaColor:function(a){return 6===a.length&&!isNaN(parseInt(a,16))},lightenDarkenColor:function(a,c){var d=!1;"#"==a[0]&&(a=a.slice(1),d=!0);var b=parseInt(a,16),h=(b>>16)+c;255<h?h=255:0>h&&(h=0);var r=(b>>8&255)+c;255<r?r=255:0>r&&(r=0);b=(b&255)+c;255<b?b=255:0>b&&(b=0);return(d?"#":"")+(b|r<<8|h<<16).toString(16)},standardize_color:function(a){var c=document.createElement("canvas").getContext("2d");c.fillStyle=a;return c.fillStyle},resolveColor:function(a,c){qv.util.startsWith(a,"#")||(a=qv.util.color.standardize_color(a));
if(!c||"1"==c)return a;var d=parseInt(a.substring(1),16);return"rgba("+(d>>16&255)+","+(d>>8&255)+","+(d&255)+","+c+")"}},css:function(){var a={};return{replaceCssClasses:function(c){for(;0<=(posIni=c.indexOf("gxpl_cssReplace("));){posFin=c.indexOf(")",posIni);className=c.substring(posIni+16,posFin);var d=className;if(void 0!=a[d])style=a[d];else{for(var b=d,h=void 0,r=gx.theme+".css",o=!1,k=void 0,n=0;n<document.styleSheets.length;n++)if(null!=document.styleSheets[n].href&&0<=document.styleSheets[n].href.indexOf(r)){o=
!0;h=document.styleSheets[n];break}o&&(h.cssRules?crossRules=h.cssRules:h.rules&&(crossRules=h.rules));h=Number.MAX_SAFE_INTEGER;for(n=0;n<crossRules.length;n++)r=crossRules[n],void 0!=r.selectorText&&(0==r.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&r.selectorText.length<h)&&(k=r.style,h=r.selectorText.length);styleObj=k;void 0!=styleObj?(b=styleObj,k="",""!=b.color&&(k+=(""==k?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(k+=(""==k?"":";")+"backgroundColor:"+
qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(k+=(""==k?"":";")+"borderStyle:"+b.borderStyle),""!=b.borderWidth&&(k+=(""==k?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(k+=(""==k?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),""!=b.fontFamily&&(k+=(""==k?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(k+=(""==k?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px",
"")),""!=b.fontWeight&&(k+=(""==k?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(k+=(""==k?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(k+=(""==k?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=k,style=a[d]=styleTransformed):style=""}toReplace=c.substring(posIni,posFin+1);c=c.replace(toReplace,style)}return c},parseStyle:function(a){var d="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var h=a[b].split(":"),r=h[0],d=d+
((""==d?"":",")+'"'+("borderThickness"==r?"borderWidth":r)+'":"'+h[1]+("borderThickness"==r||"fontSize"==r?"px":"")+'"');return"{"+d+"}"}return"{}"},resolveVariable:function(a){return qv.util.startsWith(a,"var(")&&qv.util.endsWith(a,")")?(a=a.substr(4,a.length-5),qv.util.trim(getComputedStyle(document.documentElement).getPropertyValue(a.toLowerCase()))):a}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,c,d){function b(a,b){function h(a,g){for(var e=0;e<a.Metadata.Parameters.length;e++){var b=
a.Metadata.Parameters[e];if(b.IsCollection&&b.Name==g)return[e,b]}return[null,null]}function c(a,g){for(var e=null,b=0;b<a.Parameters.length;b++)if(a.Parameters[b].Name==g){e=a.Parameters[b];break}return e}function l(a,g){for(var e="",b="I"==g.Type||"R"==g.Type||"B"==g.Type?"":'"',h=0;h<a.Filter.Values.length;h++)e+=(""==e?"":",")+b+a.Filter.Values[h]+b;return"["+e+"]"}var g=[];a._parametersCloned||(a._parametersCloned=!0,a.Parameters=qv.util.cloneObject(a.Parameters));for(var q=qv.util.GetOrderedElementsKeys(a,
b),f=a.GetMetadata(),d=0;d<q.length;d++){var C=parseInt(q[d].substr(6,4));sourceElement=b[C];var e=h(a,sourceElement.Name),C=e[0],e=e[1],m=qv.util.GetElementInCollection(f,"Name",sourceElement.Name),y=null!=m,B=!y;y&&(qv.util.MergeFields(sourceElement,m),g.push(m));B&&null!=e&&(e=l(sourceElement,e),a.Object?(m=eval(a.Object),m[C+2]=e,a.Object=JSON.stringify(m)):(C=c(a,sourceElement.Name),null==C&&(C={},C.Name=sourceElement.Name,a.Parameters.push(C)),C.Value=e))}a.Axes=g}function h(a,h,c){b(a,h);a.RememberLayout=
!1;a.AllowElementsOrderChange=c;qv.util.autorefresh.SaveAxesAndParametersState(a);a._Autorefreshing=!0;a.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup))for(index in qv.util.autorefresh.DeleteAxesAndParametersState(a),qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup&&(void 0!=qViewerOther.Metadata&&
void 0!=qViewerOther.Metadata.Parameters?h(qViewerOther,c,d):qViewerOther.getQueryParameters(function(a,b){var k=qv.util.dom.xmlDocument(a),k=qv.util.dom.getSingleElementByTagName(k,"gxpl_ParameterCollection");void 0==b.Metadata&&(b.Metadata={});b.Metadata.Parameters=[];for(var k=qv.util.dom.getMultipleElementsByTagName(k,"gxpl_Parameter"),n=0;n<k.length;n++){var l={};l.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],"Name"));l.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],
"Type"));l.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[n],"IsCollection")));b.Metadata.Parameters.push(l)}h(b,c,d)}))},LoadAxesAndParametersState:function(a){function c(a,b){for(var c=0;c<b.length;c++){var k=b[c],d;a:{d=a;for(var l=k.Name,g=0;g<d.length;g++)if(d[g].Name.toLowerCase()==l.toLowerCase()){d=d[g];break a}d=null}null!=d&&Object.assign(d,k)}return a}var d=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",
b=d+"Axes",d=qv.util.storage.getItem(d+"Parameters"),b=qv.util.storage.getItem(b);null!=d&&""!=d&&(a.Parameters=c(JSON.parse(d),a.Parameters),a.RememberLayout=!1);null!=b&&""!=b&&(a.Axes=c(JSON.parse(b),a.Axes),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=c+"Axes";qv.util.storage.setItem(c+"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(d,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=
window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",c=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(c)}}}(),dom:{getSingleElementByTagName:function(a,c){var d;d=this.getMultipleElementsByTagName(a,c);return 0<d.length?d[0]:null},getMultipleElementsByTagName:function(a,c){return!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?a.getElementsByTagName(c):a.selectNodes(c)},getBooleanAttribute:function(a,c,d){a=a.getAttribute(c);return null==
a?d:"true"==a.toLowerCase()},getCharacterAttribute:function(a,c,d){a=a.getAttribute(c);return null==a?d:a},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,c){var d;a.evaluate?(d=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),d=d.iterateNext()):(d=a.selectNodes(c),d=0<d.length?d[0]:null);return d},xmlDocument:function(a){var c;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,
c=parser.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,c){for(key in c)a.style[key]=c[key]},createText:function(a,c){var d=document.createTextNode(c);a.appendChild(d);return d},createElement:function(a,c,d,b,h,r,o){c=document.createElement(c);""!=d&&(c.id=d);""!=b&&(c.className=b);qv.util.dom.setStyle(c,
h);"function"==typeof r&&(c.onclick=r);""!=o&&qv.util.dom.createText(c,o);null!=a&&a.appendChild(c);return c},createTable:function(a,c,d){a=qv.util.dom.createElement(a,"TABLE","",c,d,null,"");c=document.createElement("TBODY");a.appendChild(c);return c},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,c,d,b,h){a=qv.util.dom.createElement(a,"TD","","",b,null,h);1!=c&&(a.colSpan=c);""!=d&&(a.align=d);return a},createSpan:function(a,c,d,b,h,r,o){a=
qv.util.dom.createElement(a,"SPAN",c,d,h,r,o);""!=b&&(a.title=b);return a},createDiv:function(a,c,d,b,h,r){a=qv.util.dom.createElement(a,"DIV",c,d,h,null,r);""!=b&&(a.title=b);return a},createAnchor:function(a,c,d,b){return qv.util.dom.createElement(a,"A",c,"",d,null,b)},createInput:function(a,c,d,b){a=qv.util.dom.createElement(a,"INPUT",c,"",b,null,"");""!=d&&(a.type=d);return a},createSelect:function(a,c){return qv.util.dom.createElement(a,"SELECT",c,"",{},null,"")},createOption:function(a,c,d,
b){a=qv.util.dom.createElement(a,"OPTION","","",{},null,b);""!=c&&(a.value=c);d&&(a.selected=!0);return a},createIcon:function(a,c,d,b){a=qv.util.dom.createElement(a,"I","","material-icons",d,null,b);""!=c&&(a.title=c);return a},loadStylesAndScripts:function(a,c,d,b){function h(a,b,h,g){qv.util.dom._loadedStyles=qv.util.dom._loadedStyles||[];if(0>qv.util.dom._loadedStyles.indexOf(a))if(qv.util.dom._loadedStyles.push(a),a=qv.services.url.getStaticDirectory()+a,gx.O.DSO){var c=document.createElement("style");
c.setAttribute("data-gx-href",a);c.innerHTML='@import url("'+a+'") layer('+b+")";"function"===typeof g&&(c.onload=g);$(c).insertBefore(h)}else b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,"function"===typeof g&&(b.onload=g),$(b).insertBefore(h);else g()}function r(a,b,c,g,q){"undefined"===typeof q&&(q=0);if(q>=a.length){var f=qv.services.url.getStaticDirectory();gx.http.loadScripts(c.map(function(a){return f+a}),g)}else h(a[q],o,b,function(a,g,e){r(a,b,c,g,e+1)}.closure(this,
[a,g,q]))}var o=a[0].replace(/\//g,"_").replace(/\./g,"_");h(a[0],o,gx.getThemeElement(),function(b,h){var c=qv.util.GetLinkOrStyleElement(a[0]),g=a.slice(1).concat(b);r(g,c,d,h)}.closure(this,[c,b]))}},storage:function(){function a(a,d,b){if(b){var h=new Date;h.setTime(h.getTime()+864E5*b);b="; expires="+h.toGMTString()}else b="";document.cookie=a+"="+d+b+"; path=/"}return{setItem:function(c,d){localStorage?localStorage.setItem(c,d):a(c,d,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);
a:{for(var a=a+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var h=d[b];" "==h.charAt(0);)h=h.substring(1,h.length);if(0==h.indexOf(a)){a=h.substring(a.length,h.length);break a}}a=null}return a},removeItem:function(c){localStorage?localStorage.removeItem(c):a(c,"",-1)}}}(),ExecuteTracker:function(a,c){for(var d=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(d[d.length]=gx.fx.ctx.trackers[b]);for(b=0;b<d.length;b++){var h=gx.O;gx.O=d[b].obj;var r=gx.csv.cmpCtx;
gx.csv.cmpCtx=d[b].obj.CmpContext;gx.evt.setProcessing(!1);d[b].hdl.call(d[b].obj,null,null,c);gx.O=h;gx.csv.cmpCtx=r}},satisfyStyle:function(a,c){switch(c.Operator){case QueryViewerConditionOperator.Equal:return a==c.Value1;case QueryViewerConditionOperator.GreaterThan:return a>c.Value1;case QueryViewerConditionOperator.LessThan:return a<c.Value1;case QueryViewerConditionOperator.GreaterOrEqual:return a>=c.Value1;case QueryViewerConditionOperator.LessOrEqual:return a<=c.Value1;case QueryViewerConditionOperator.NotEqual:return a!=
c.Value1;case QueryViewerConditionOperator.Interval:return a>=c.Value1&&a<=c.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,c){var d=a.getStringWithFmt("Y4MD").replace(/\//g,"-");c&&(a.TimeFmt=24,d+=" "+a.getTimeString(!0,!0));return d},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,c){return a.substr(a.length-c.length,c.length)==c},startsWith:function(a,c){return a.substr(0,c.length)==c},formatNumber:function(a,c,d,b){a=gx.num.formatNumber(a,c,d,0,!0,!1);if(b&&0<=a.indexOf(gx.decimalPoint)){for(;qv.util.endsWith(a,
"0");)a=a.slice(0,-1);qv.util.endsWith(a,gx.decimalPoint)&&(a=a.slice(0,-1))}return a},formatDateTime:function(a,c,d,b,h,r,o){a=new gx.date.gxdate(a,"Y4MD");d=a.getStringWithFmt(d);c==QueryViewerDataType.DateTime&&(a.TimeFmt=24,d+=" "+a.getTimeString(h,r,b,o));return d},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+
qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):qv.util.formatNumber(Math.round(a/
60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,c){var d,b,h="",r="";if(""==c)d=a==QueryViewerDataType.Integer?0:2,b=!1;else{0>c.indexOf(".")&&0>c.indexOf(",")?(d=0,b=!1):0<=c.indexOf(".")&&0>c.indexOf(",")?(d=a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!1):(d=0>c.indexOf(".")&&0<=c.indexOf(",")?0:a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!0);for(var o=1,k=0;k<c.length;k++){var n=
c.substr(k,1);if(("."==n||","==n||"9"==n||"Z"==n)&&1==o)o=2;"."!=n&&(","!=n&&"9"!=n&&"Z"!=n)&&2==o&&(o=3);switch(o){case 1:h+=n;break;case 3:r+=n}}}return{DecimalPrecision:d,UseThousandsSeparator:b,Prefix:h,Suffix:r}},ParseDateTimePicture:function(a,c){var d=gx.dateFormat,b=a==QueryViewerDataType.DateTime,h=a==QueryViewerDataType.DateTime,r=a==QueryViewerDataType.DateTime,o=a==QueryViewerDataType.DateTime;""!=c&&(0<=c.indexOf("9999")&&0>d.indexOf("Y4")?d=d.replace("Y","Y4"):0>c.indexOf("9999")&&0<=
d.indexOf("Y4")&&(d=d.replace("Y4","Y")),a==QueryViewerDataType.DateTime&&(b=c.indexOf(" "),0<=b?(o=c.substr(b+1,c.length-b),b=2<=o.length,h=5<=o.length,r=8<=o.length,o=12==o.length):o=r=h=b=!1));return{DateFormat:d,IncludeHours:b,IncludeMinutes:h,IncludeSeconds:r,IncludeMilliseconds:o}},evaluate:function(a,c,d){for(var b=1;b<=d.length;b++)a=a.replace(c+b.toString(),d[b-1]);return eval(a)},aggregate:function(a,c,d){var a=a||QueryViewerAggregationType.Sum,b=null,h=null,r=null,o=null;switch(a){case QueryViewerAggregationType.Sum:for(a=
0;a<c.length;a++)null!=c[a]&&(b+=c[a]);return b;case QueryViewerAggregationType.Average:for(a=0;a<c.length;a++)null!=c[a]&&(b+=c[a],h+=d[a]);return null!=b?b/h:null;case QueryViewerAggregationType.Count:for(a=0;a<d.length;a++)h+=d[a];return h;case QueryViewerAggregationType.Max:for(a=0;a<c.length;a++)o=null==o?c[a]:c[a]>o?c[a]:o;return o;case QueryViewerAggregationType.Min:for(a=0;a<c.length;a++)r=null==r?c[a]:c[a]<r?c[a]:r;return r}},anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},
showActivityIndicator:function(a){var c='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");',a=a.userControlId();qv.fadeTimeouts[a]&&clearTimeout(qv.fadeTimeouts[a]);qv.fadeTimeouts[a]=setTimeout(c,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.addClass(a.childNodes[c],"gx-qv-loading-children")},hideActivityIndicator:function(a){var c=a.userControlId();qv.fadeTimeouts[c]&&(clearTimeout(qv.fadeTimeouts[c]),
qv.fadeTimeouts[c]=void 0);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(c=0;c<a.childNodes.length;c++)gx.dom.removeClass(a.childNodes[c],"gx-qv-loading-children")},renderError:function(a,c){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,c);else{var d=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(d,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",
borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+c);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var b=a.Metadata.Axes[d];if(!b.IsComponent){var h={};h.Name=b.Name;h.Title=b.Title;h.DataField=b.DataField;h.Visible=b.Visible;h.Type=QueryViewerElementType.Axis;h.Axis=b.Axis;h.Filter=b.Filter;h.ExpandCollapse=b.ExpandCollapse;h.AxisOrder=b.Order;h.Format={};h.Format.Subtotals=b.Subtotals;h.Format.Picture=
b.Picture;h.Format.CanDragToPages=b.CanDragToPages;h.Format.Style=b.Style;0<b.ValuesStyles.length&&(h.Format.ValuesStyles=b.ValuesStyles);h.Actions={};h.Actions.RaiseItemClick=b.RaiseItemClick;c.push(h)}}for(d=0;d<a.Metadata.Data.length;d++)b=a.Metadata.Data[d],b.IsComponent||(h={},h.Name=b.Name,h.Title=b.Title,h.DataField=b.DataField,h.Visible=b.Visible,h.Type=QueryViewerElementType.Datum,h.Axis="",h.Aggregation=b.Aggregation,h.Format={},h.Format.Picture=b.Picture,h.Format.Style=b.Style,h.Format.TargetValue=
b.TargetValue,h.Format.MaximumValue=h.Format.TargetValue,0<b.ConditionalStyles.length&&(h.Format.ConditionalStyles=b.ConditionalStyles),h.Actions={},h.Actions.RaiseItemClick=b.RaiseItemClick,c.push(h));return c},MergeFields:function(a,c){if(c.Visible!=QueryViewerVisible.Never&&(c.Visible=a.Hidden?QueryViewerVisible.No:QueryViewerVisible.Yes,c.Type==QueryViewerElementType.Axis)){c.Axis=a.Axis;if(a.Order)switch(c.AxisOrder.Type){case QueryViewerAxisOrderType.None:case QueryViewerAxisOrderType.Ascending:case QueryViewerAxisOrderType.Descending:c.AxisOrder.Type=
a.Order;break;case QueryViewerAxisOrderType.Custom:a.Order==QueryViewerAxisOrderType.Descending&&c.AxisOrder.Values.reverse()}c.Format.Subtotals!=QueryViewerSubtotals.No&&void 0!=a.Subtotals&&(c.Format.Subtotals=a.Subtotals==QueryViewerSubtotals.Yes?QueryViewerSubtotals.Yes:QueryViewerSubtotals.Hidden);a.Filter&&(c.Filter=a.Filter);a.ExpandCollapse&&(c.ExpandCollapse=a.ExpandCollapse)}},GetOrderedElementsKeys:function(a,c){function d(a,b,g){return Array(b-(""+a).length+1).join(g||"0")+a}for(var b=
[],h=0;h<c.length;h++){var r=c[h],o=a.RealType==QueryViewerOutputType.Table?"0":r.Type==QueryViewerElementType.Axis?"1":"2";if(null!=r.Position){var k;if(a.RealType==QueryViewerOutputType.PivotTable)if(r.Type==QueryViewerElementType.Axis)switch(r.Axis){case QueryViewerAxisType.Columns:k="B";break;case QueryViewerAxisType.Pages:k="C";break;default:k="A"}else k="D";else k="A";o+=k+d(r.Position,4,"0")+d(h,4,"0")}else o+="Z"+d(h,4,"0")+d(h,4,"0");b.push(o)}b.sort();return b},GetContainerControlClass:function(a){return""!=
a.Class?a.Class+"-"+a.RealType.toLowerCase():""},GetContainerControlClasses:function(a){var c=qv.util.GetContainerControlClass(a),d;switch(a.RealType){case QueryViewerOutputType.Card:d="qv-card";break;case QueryViewerOutputType.Chart:d="qv-chart";break;case QueryViewerOutputType.PivotTable:d="qv-pivottable";break;case QueryViewerOutputType.Table:d="qv-table";break;case QueryViewerOutputType.Map:d="qv-map"}""!=c&&(d+=" "+c);return d},SetUserControlClass:function(a,c){a.getContainerControl().className=
"gx_usercontrol "+c},GetElementInCollection:function(a,c,d){for(var b=0;b<a.length;b++){var h=a[b];if(h[c]==d)return h}return null},IsInteger:function(a){return Number.isInteger?Number.isInteger(a):"number"===typeof a&&isFinite(a)&&Math.floor(a)===a},ApplyPicture:function(a,c,d,b){switch(d){case QueryViewerDataType.Integer:case QueryViewerDataType.Real:return qv.util.formatNumber(a,b.DecimalPrecision,c,!1);case QueryViewerDataType.Boolean:case QueryViewerDataType.Character:case QueryViewerDataType.GUID:case QueryViewerDataType.GeoPoint:return qv.util.trim(a);
case QueryViewerDataType.Date:case QueryViewerDataType.DateTime:return qv.util.formatDateTime(a,d,b.DateFormat,b.IncludeHours,b.IncludeMinutes,b.IncludeSeconds,b.IncludeMilliseconds)}},GetPictureProperties:function(a,c){return a==QueryViewerDataType.Integer||a==QueryViewerDataType.Real?qv.util.ParseNumericPicture(a,c):a==QueryViewerDataType.Date||a==QueryViewerDataType.DateTime?qv.util.ParseDateTimePicture(a,c):null},GetAxisByDataField:function(a,c){for(var d=0;d<a.Metadata.Axes.length;d++)if(a.Metadata.Axes[d].DataField==
c)return a.Metadata.Axes[d]},GetThemeStyleSheet:function(a){a._themeStyleSheet||(a._themeStyleSheet=gx.getThemeElement().sheet);return a._themeStyleSheet},GetNullColor:function(){return qv.util.GetColorObject("")},GetColorObject:function(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}},IsNullColor:function(a){return a.IsDefault?0>a.ColorIndex:""==a.Color},GetQueryViewerStyleSheet:function(a){if(!a._queryViewerStyleSheet){var c=qv.util.GetLinkOrStyleElement("QueryViewer.css").sheet.rules[0];a._queryViewerStyleSheet=
c.styleSheet}return a._queryViewerStyleSheet},GetLinkOrStyleElement:function(a){if(gx.O.DSO)for(var c=document.getElementsByTagName("style"),d=0;d<c.length;d++){if(c[d].attributes["data-gx-href"]&&0<=c[d].attributes["data-gx-href"].value.indexOf(a))return c[d]}else{c=document.getElementsByTagName("link");for(d=0;d<c.length;d++)if(c[d].attributes.href&&0<=c[d].attributes.href.value.indexOf(a))return c[d]}return null},XAxisDataType:function(a){for(var c=0,d="",b=0;b<a.Metadata.Axes.length;b++){var h=
a.Metadata.Axes[b];if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always)c++,d=h.DataType}return 1==c?d:QueryViewerDataType.Character},ProcessDataAndMetadata:function(a){function c(a){for(var b=0,g=0;g<a.length;g++)"F0"!=a[g].DataField&&b++;return b}function d(a){a.Chart.Categories={};a.Chart.Categories.DataFields=[];for(var b=0;b<a.Metadata.Axes.length;b++){var g=a.Metadata.Axes[b];if(g.Visible==QueryViewerVisible.Yes||g.Visible==QueryViewerVisible.Always)(a.RealType!=QueryViewerOutputType.Map||
g.DataType==QueryViewerDataType.Character)&&a.Chart.Categories.DataFields.push(g.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];g=c(a.Metadata.Data);for(b=0;b<a.Metadata.Data.length;b++){var e=a.Metadata.Data[b];(1==g?e.Visible==QueryViewerVisible.Yes||e.Visible==QueryViewerVisible.Always:e.Visible!=QueryViewerVisible.Never)&&a.Chart.Series.DataFields.push(e.DataField)}}function b(a){for(var b={},g=0;g<a.Metadata.Axes.length;g++){var e=a.Metadata.Axes[g],h=qv.util.GetPictureProperties(e.DataType,
e.Picture);b[e.DataField]={Picture:e.Picture,DataType:e.DataType,PictureProperties:h,Filter:e.Filter}}return b}function h(a,b){function g(a,b,e){function h(a){for(var b=!1,g=0;g<a.length;g++)if(r(a[g].StyleOrClass,!1)[0]){b=!0;break}return b}var c;if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Bubble&&""!=a.Chart.colorAxis))c=!1;else if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&
0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length))c=!0;a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsSingleSerieChart(a)||a.RealChartType==QueryViewerChartType.PolarArea&&1==a.Chart.Series.DataFields.length)?c=!0:a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsAreaChart(a)||qv.chart.IsLineChart(a)||a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar)?c=!1:a.RealType==QueryViewerOutputType.Chart&&
1<a.Chart.Series.DataFields.length&&!qv.chart.IsSplittedChart(a)?c=!1:(a=h(b.ConditionalStyles),b=!1,null!=e&&(b=h(e.ValuesStyles)),c=a||b);return c}for(var e={},h=c(a.Metadata.Data),m=0;m<a.Metadata.Data.length;m++){var f=a.Metadata.Data[m];if(1==h?f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always:f.Visible!=QueryViewerVisible.Never){var q=g(a,f,b);e[f.DataField]={Datum:f,Multicolored:q}}}return e}function r(a,b){var g="",e=!1,h=b?"backgroundcolor":"color";if(""!=a){for(var c=
a.split(";"),m=0;m<c.length;m++){var f=c[m].split(":");if(2==f.length){var q=qv.util.trim(f[0]),f=qv.util.trim(f[1]);if(q.toLowerCase()==h){g=f;e=""!=f;break}}}e&&"#"==g.substr(0,1)&&(g=g.replace("#",""))}return[e,g]}function o(a,b,g,e,h,c,m){function f(a,b){for(var g=[!1,""],e=0;e<a.ValuesStyles.length;e++){var h=a.ValuesStyles[e];if(h.Value==b){g=r(h.StyleOrClass,!1);break}}return g}function q(a,b){for(var g=[!1,""],e=!1,h=0;h<a.ConditionalStyles.length;h++){var c=a.ConditionalStyles[h];if(e=qv.util.satisfyStyle(b,
c)){g=r(c.StyleOrClass,!1);break}}return g}var k,l=-1,d=!1;if(a){if(a=!1,null!=g&&(g=f(g,c),a=g[0],k=g[1]),!a)g=q(b,m),a=g[0],k=g[1],a||(l=h%HIGHCHARTS_MAX_COLORS,d=!0)}else g=r(b.Style,!1),a=g[0],k=g[1],a||(l=e%HIGHCHARTS_MAX_COLORS,d=!0);return{IsDefault:d,Color:k,ColorIndex:l}}function k(a,b,g,e){for(var h="",c="",m=0;m<a.Chart.Categories.DataFields.length;m++){var f=a.Chart.Categories.DataFields[m],q;void 0!=b[f]?(q=qv.util.trim(b[f]),f=qv.util.ApplyPicture(q,e[f].Picture,e[f].DataType,e[f].PictureProperties)):
f=q=a.Metadata.TextForNullValues;h+=(""==h?"":", ")+q;c+=(""==c?"":", ")+f}b=[h,c];e={};e.Value=b[0];e.ValueWithPicture=b[1];a.Chart.Categories.Values.push(e);if(0==g)a.Chart.Categories.MinValue=e.Value,a.Chart.Categories.MaxValue=e.Value;else if(e.Value>a.Chart.Categories.MaxValue&&(a.Chart.Categories.MaxValue=e.Value),e.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=e.Value}function n(a,b,g,e,h){for(var c=0;c<a.Chart.Series.DataFields.length;c++){var m=a.Chart.Series.ByIndex[c],f=
a.Chart.Series.DataFields[c],q=void 0!=b[f]?b[f]:null,k={};k.Value=q;var l=e[f].Datum,d=e[f].Multicolored;if(l.Aggregation==QueryViewerAggregationType.Average){var s=b[f+"_N"],f=b[f+"_D"];void 0==s&&void 0==f&&(s=q,f="1");k.Value_N=s;k.Value_D=f}k.Color=d?o(d,l,h,0,g,a.Chart.Categories.Values[g].Value,q):qv.util.GetNullColor();m.Points.push(k);0<k.Value&&(m.PositiveValues=!0);0>k.Value&&(m.NegativeValues=!0);if(0===g)m.MinValue=parseFloat(k.Value),m.MaxValue=parseFloat(k.Value);else if(parseFloat(k.Value)>
m.MaxValue&&(m.MaxValue=parseFloat(k.Value)),parseFloat(k.Value)<m.MinValue)m.MinValue=parseFloat(k.Value)}}function l(a,b){for(var g=0;g<b.ConditionalStyles.length;g++){var e=b.ConditionalStyles[g],h=r(e.StyleOrClass,!0),c=h[1];if(h[0]){plotBand={};plotBand.Color=qv.util.GetColorObject(c);if(e.Operator==QueryViewerConditionOperator.Interval)plotBand.From=parseFloat(e.Value1),plotBand.To=parseFloat(e.Value2);else if(e.Operator==QueryViewerConditionOperator.Equal)plotBand.From=parseFloat(e.Value1),
plotBand.To=parseFloat(e.Value1);else if(e.Operator==QueryViewerConditionOperator.GreaterOrEqual||e.Operator==QueryViewerConditionOperator.GreaterThan)plotBand.From=parseFloat(e.Value1);else if(e.Operator==QueryViewerConditionOperator.LessOrEqual||e.Operator==QueryViewerConditionOperator.LessThan)plotBand.To=parseFloat(e.Value1);plotBand.SeriesName=""!=b.Title?b.Title:b.Name;a.Chart.PlotBands.push(plotBand)}}}function g(a,b){for(var g=!1,e=0;e<a.Metadata.Axes.length;e++){var h=a.Metadata.Axes[e];
if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always){var c=qv.util.trim(b[h.DataField]);if(h.Filter.Type==QueryViewerFilterType.HideAllValues){g=!0;break}else if(h.Filter.Type==QueryViewerFilterType.ShowSomeValues&&0>h.Filter.Values.indexOf(c)){g=!0;break}if(a.RealType===QueryViewerOutputType.Map&&h.DataType===QueryViewerDataType.Character)if(a.Region===QueryViewerRegion.Country){if(!qv.util.startsWith(c.toUpperCase(),a.Country+"-")){g=!0;break}}else if(a.Region===QueryViewerRegion.Continent)switch(a.Continent){case QueryViewerContinent.Africa:g=
!qv.map.IsAfricanCountry(c.toUpperCase());break;case QueryViewerContinent.Asia:g=!qv.map.IsAsianCountry(c.toUpperCase());break;case QueryViewerContinent.Europe:g=!qv.map.IsEuropeanCountry(c.toUpperCase());break;case QueryViewerContinent.NorthAmerica:g=!qv.map.IsNorthAmericanCountry(c.toUpperCase());break;case QueryViewerContinent.Oceania:g=!qv.map.IsOceanianCountry(c.toUpperCase());break;case QueryViewerContinent.SouthAmerica:g=!qv.map.IsSouthAmericanCountry(c.toUpperCase());break;default:g=!0}}}return g}
function q(a){0>=a.TargetValue&&(a.TargetValue=100);0>=a.MaximumValue&&(a.MaximumValue=100);a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function f(a){for(var g=[],b=[],e="",h=0;h<a.Points.length;h++){var c,m;a.Aggregation==QueryViewerAggregationType.Count?(c=0,m=parseFloat(qv.util.trim(a.Points[h].Value))):a.Aggregation==QueryViewerAggregationType.Average?(c=parseFloat(qv.util.trim(a.Points[h].Value_N)),m=parseFloat(qv.util.trim(a.Points[h].Value_D))):(c=parseFloat(qv.util.trim(a.Points[h].Value)),
m=1);g.push(c);b.push(m);""==e&&(e=a.Points[h].Color)}g=qv.util.aggregate(a.Aggregation,g,b).toString();a.Points=[{Value:g,Value_N:g,Value_D:"1",Color:e}];a.NegativeValues=0>g;a.PositiveValues=0<g}function x(a,g){a.Chart.colorAxis=a.Chart.colorAxis||{};a.Chart.colorAxis.dataClasses=a.Chart.colorAxis.dataClasses||[];for(var b=0;b<g.ConditionalStyles.length;b++){var e=g.ConditionalStyles[b];colorAxis={dataClasses:[]};var h={};h.color=e.StyleOrClass.replace("color:","");e.Operator==QueryViewerConditionOperator.Interval?
(h.from=parseFloat(e.Value1),h.to=parseFloat(e.Value2),h.Operator=QueryViewerConditionOperatorSymbol.Interval):e.Operator==QueryViewerConditionOperator.Equal?(h.from=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.Equal):e.Operator==QueryViewerConditionOperator.GreaterOrEqual?(h.from=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.GreaterOrEqual):e.Operator==QueryViewerConditionOperator.GreaterThan?(h.from=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.GreaterThan):
e.Operator==QueryViewerConditionOperator.LessThan?(h.to=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.LessThan):e.Operator==QueryViewerConditionOperator.LessOrEqual?(h.to=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.LessOrEqual):e.Operator==QueryViewerConditionOperator.NotEqual&&(h.from=parseFloat(e.Value1),h.Operator=QueryViewerConditionOperatorSymbol.NotEqual);a.Chart.colorAxis.dataClasses.push(h)}}var C=function(a){var g=qv.util.XAxisDataType(a),e;switch(a.RealType){case QueryViewerOutputType.Chart:a=
qv.chart.IsDatetimeXAxis(a)?g==QueryViewerDataType.Date||g==QueryViewerDataType.DateTime:!0;e="GXPL_QViewerNoDatetimeAxis";break;case QueryViewerOutputType.Map:a=g==QueryViewerDataType.GeoPoint||g==QueryViewerDataType.Character;e="GXPL_QViewerNoMapAxis";break;default:a=!0}return{IsOK:a,Error:a?"":gx.getMessage(e)}}(a);if(C.IsOK){a.Chart={};d(a);a.Chart.Categories.MinValue=null;a.Chart.Categories.MaxValue=null;a.Chart.Categories.Values=[];C=b(a);a.Chart.Series.ByIndex=[];var e=1==a.Chart.Categories.DataFields.length?
qv.util.GetAxisByDataField(a,a.Chart.Categories.DataFields[0]):null,m=h(a,e);a.Chart.PlotBands=[];for(var y=0;y<a.Chart.Series.DataFields.length;y++){var B=a.Chart.Series.DataFields[y],v=m[B].Datum,s={MinValue:null,MaxValue:null},B=m[B].Multicolored;s.FieldName=v.Name;s.Name=v.Title;s.Visible=v.Visible;s.DataType=v.DataType;s.Aggregation=v.Aggregation;var G=v.Picture;s.Picture=""==G?s.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":G;s.NumberFormat=qv.util.ParseNumericPicture(s.DataType,
s.Picture);s.Color=B?qv.util.GetNullColor():o(B,v,e,y,0,"",0);s.TargetValue=v.TargetValue;s.MaximumValue=v.MaximumValue;q(s);s.PositiveValues=!1;s.NegativeValues=!1;s.Points=[];a.Chart.Series.ByIndex.push(s);a.RealType==QueryViewerOutputType.Chart&&l(a,v);a.RealType==QueryViewerOutputType.Map&&x(a,v)}for(y=v=0;y<a.Data.Rows.length;y++)s=a.Data.Rows[y],g(a,s)||(k(a,s,v,C),n(a,s,v,m,e),v++);if(a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsGaugeChart(a))for(y=0;y<a.Chart.Series.DataFields.length;y++)s=
a.Chart.Series.ByIndex[y],f(s);return""}return C.Error},getTranslation:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime?gx.getMessage(a):a},getTranslationAlsoIfStatic:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime||qv.TranslationType==QueryViewerTranslationType.Static?gx.getMessage(a):a},aggregateData:function(a,c){for(var d={},b=0;b<a.length;b++){var h=a[b],r;r=h;for(var o=c,k=[],n=[],l=[],g=0;g<o.length;g++){var q=o[g];if(r.IsFormula){var f=0;
do{f++;var x=q[r.DataField+"_"+f.toString()];void 0!=x&&(x=parseFloat(x),0==g?l.push(x):l[f-1]+=x)}while(void 0!=x)}else r.Aggregation==QueryViewerAggregationType.Count?(f=0,q=parseFloat(q[r.DataField])):r.Aggregation==QueryViewerAggregationType.Average?(f=parseFloat(q[r.DataField+"_N"]),q=parseFloat(q[r.DataField+"_D"])):(f=parseFloat(q[r.DataField]),q=1),k.push(f),n.push(q)}r=r.IsFormula?qv.util.evaluate(r.Formula,r.DataField+"_",l):qv.util.aggregate(r.Aggregation,k,n).toString();d[h.DataField]=
r}return d},isRTL:function(a){var a=a.getContainerControl().id,a=document.getElementById(a),c=!1;cs=window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue("direction"):a.currentStyle.direction;"rtl"==cs&&(c=!0);return c}};var STATE_DONE=4,STATUS_OK=200,METADATA_VERSION=2;
qv.services=function(){function a(a){return eval(a)[1].replace(/\\/g,".")}function c(a,b){var c=qv.services.RuntimeParametersJSON(a),k;k=a.Axes;for(var n=d(a),l=0;l<k.length;l++){var g=k[l],q="";void 0!=g.AxisOrder&&(q=g.AxisOrder.Type);""!=q&&(q=qv.services.postInfo._priv.SdtWithValuesJSON("Order",q,QueryViewerAxisOrderType.Custom,g.AxisOrder.Values,!1),n+=","+q);void 0!=g.Analytics&&(n+=","+g.Analytics.ShowValuesAs,n+=","+g.Analytics.RollingAverageType,n+=","+g.Analytics.RollingAverageTerms,n+=
","+g.Analytics.DifferenceFrom,n+=","+g.Analytics.ShowAsPercentage)}k=n;n=a.RealType==QueryViewerOutputType.Table?"PagedRecordSet":a.RealType==QueryViewerOutputType.PivotTable?"PagedLineSet":"NotPaged";return a.ObjectName!=b.ObjectName||a.ObjectType!=b.ObjectType||a.ObjectId!=b.ObjectId||a.Object!=b.Object||c!=b.RuntimeParametersJSON||k!=b.FieldsJSON||n!=b.DataType?(b.ObjectName=a.ObjectName,b.ObjectType=a.ObjectType,b.ObjectId=a.ObjectId,b.Object=a.Object,b.RuntimeParametersJSON=c,b.FieldsJSON=k,
b.DataType=n,!0):!1}function d(a){return a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsDatetimeXAxis(a)||a.RealType==QueryViewerOutputType.Card&&(a.IncludeSparkline||a.IncludeTrend)}function b(a,b){return{Success:a,Message:b}}return{url:function(){function a(b,h){var l=qv.util.getGenerator(),g;g=(new Date).getTime();var q=b.enableServerDebug?"_debug":"";switch(l){case "C#":var l=new gx.util.Url(location.href),f=l.path,f=f.substr(0,f.lastIndexOf("/")+1);urlresult=""==l.port?l.protocol+"://"+
l.host+f:l.protocol+"://"+l.host+":"+l.port+f;return urlresult+"agxpl_get"+q+".aspx?"+h+","+g;case "Java":return c(!1)+"qviewer.services.agxpl_get"+q+"?"+h+","+g;default:return""}}function b(){var a;a=""!=gx.staticDirectory?gx.staticDirectory:this.getCookie("StaticContent");return qv.util.startsWith(a,"/")?a.substr(1,a.length-1):a}function c(a){var h=gx.util.resourceUrl(gx.basePath,!0);a&&(h+=b());return h}return{getDefaultOutputURL:function(b){return a(b,"defaultoutput")},getRecordsetCacheKeyURL:function(b){return a(b,
"recordsetcachekey")},getMetadataURL:function(b){return a(b,"metadata")},getDataURL:function(b){return a(b,"data")},getAttributeValuesURL:function(b){return a(b,"attributevalues")},getPageDataForTableURL:function(b){return a(b,"pagedatafortable")},getPageDataForPivotTableURL:function(b){return a(b,"pagedataforpivottable")},getQueryParametersURL:function(b){return a(b,"queryparameters")},getDashboardSpecURL:function(b){return a(b,"dashboardspec")},getStaticDirectory:function(){return"Java"===qv.util.getGenerator()?
c(!0):b()}}}(),postInfo:function(){function b(a,h){var f="",k,l,e,m,d,B,v,s,o,p,n,A,z,F,J,E;k=!1;for(i=0;void 0!=a.Axes[i];i++){k=!0;f+=""!=f?",":"";f+="{";l="";m=e=0;B=d="";s=v=!0;p=o="";n=0;E=J=F=z=A="";var D;D=a.Axes[i];var u="",t=!1;if(void 0!=D.Format&&void 0!=D.Format.ValuesStyles)for(var w=0;void 0!=D.Format.ValuesStyles[w];w++)t=!0,u+=""!=u?",":"",u+="{",u+='"Value":"'+encodeURIComponent(D.Format.ValuesStyles[w].Value)+'"',u+=",",u+='"Style":"'+encodeURIComponent(D.Format.ValuesStyles[w].StyleOrClass)+
'"',u+=",",u+='"Propagate":'+(D.Format.ValuesStyles[w].ApplyToRowOrColumn?"true":"false"),u+="}";t&&(u='"ValuesStyles":['+u+"]");D=u;u=a.Axes[i];t="";w=!1;if(void 0!=u.Format&&void 0!=u.Format.ConditionalStyles)for(var K=0;void 0!=u.Format.ConditionalStyles[K];K++)w=!0,t+=""!=t?",":"",t+="{",t+='"Operator":"'+u.Format.ConditionalStyles[K].Operator+'"',t+=",",t+='"Value1":"'+encodeURIComponent(u.Format.ConditionalStyles[K].Value1)+'"',u.Format.ConditionalStyles[K].Operator==QueryViewerConditionOperator.Interval&&
(t+=",",t+='"Value2":"'+encodeURIComponent(u.Format.ConditionalStyles[K].Value2)+'"'),t+=",",t+='"Style":"'+encodeURIComponent(u.Format.ConditionalStyles[K].StyleOrClass)+'"',t+="}";w&&(t='"ConditionalStyles":['+t+"]");u=t;t=a.Axes[i];w="";void 0!=t.Grouping&&(w+="{",w+='"GroupByYear":'+(t.Grouping.GroupByYear?"true":"false"),w+=",",w+='"YearTitle":"'+t.Grouping.YearTitle+'"',w+=",",w+='"GroupBySemester":'+(t.Grouping.GroupBySemester?"true":"false"),w+=",",w+='"SemesterTitle":"'+t.Grouping.SemesterTitle+
'"',w+=",",w+='"GroupByQuarter":'+(t.Grouping.GroupByQuarter?"true":"false"),w+=",",w+='"QuarterTitle":"'+t.Grouping.QuarterTitle+'"',w+=",",w+='"GroupByMonth":'+(t.Grouping.GroupByMonth?"true":"false"),w+=",",w+='"MonthTitle":"'+t.Grouping.MonthTitle+'"',w+=",",w+='"GroupByDayOfWeek":'+(t.Grouping.GroupByDayOfWeek?"true":"false"),w+=",",w+='"DayOfWeekTitle":"'+t.Grouping.DayOfWeekTitle+'"',w+=",",w+='"HideValue":'+(t.Grouping.HideValue?"true":"false"),w+="}",w='"Grouping":'+w);t=w;void 0!=a.Axes[i].Format&&
(l=a.Axes[i].Format.Picture?a.Axes[i].Format.Picture:"",e=a.Axes[i].Format.TargetValue?a.Axes[i].Format.TargetValue:0,m=a.Axes[i].Format.MaximumValue?a.Axes[i].Format.MaximumValue:0,d=a.Axes[i].Format.Style?a.Axes[i].Format.Style:"",B=a.Axes[i].Format.Subtotals?a.Axes[i].Format.Subtotals:"",v=void 0!=a.Axes[i].Format.CanDragToPages?a.Axes[i].Format.CanDragToPages:!0);void 0!=a.Axes[i].Actions&&(s=a.Axes[i].Actions.RaiseItemClick);void 0!=a.Axes[i].Analytics&&(o=a.Axes[i].Analytics.ShowValuesAs,p=
a.Axes[i].Analytics.RollingAverageType,n=a.Axes[i].Analytics.RollingAverageTerms,A=a.Axes[i].Analytics.DifferenceFrom,z=a.Axes[i].Analytics.ShowAsPercentage);void 0!=a.Axes[i].AxisOrder&&(F=a.Axes[i].AxisOrder.Type);void 0!=a.Axes[i].ExpandCollapse&&(J=a.Axes[i].ExpandCollapse.Type);void 0!=a.Axes[i].Filter&&(E=a.Axes[i].Filter.Type);void 0==E&&(E=QueryViewerFilterType.ShowSomeValues);f+='"Name":"'+encodeURIComponent(a.Axes[i].Name)+'"';f+=",";f+='"Caption":"'+encodeURIComponent(a.Axes[i].Title)+
'"';f+=",";f+='"Aggregation":"'+a.Axes[i].Aggregation+'"';f+=",";f+='"Visible":"'+a.Axes[i].Visible+'"';f+=",";f+='"Type":"'+a.Axes[i].Type+'"';f+=",";f+='"Axis":"'+a.Axes[i].Axis+'"';f+=",";f+='"Picture":"'+encodeURIComponent(l)+'"';f+=",";f+='"TargetValue":'+e;f+=",";f+='"MaximumValue":'+m;f+=",";f+='"Style":"'+d+'"';f+=",";f+='"Subtotals":"'+B+'"';f+=",";f+='"CanDragToPages":'+v;f+=",";f+='"RaiseItemClick":'+s;""!=o&&(f+=",",f+='"Analytics":{',f+='"ShowValuesAs":"'+o+'"',f+=",",f+='"RollingAverageType":"'+
p+'"',f+=",",f+='"RollingAverageTerms":'+n,f+=",",f+='"DifferenceFrom":"'+A+'"',f+=",",f+='"ShowAsPercentage":"'+z+'"',f+="}");""!=F&&(l=c("Order",F,QueryViewerAxisOrderType.Custom,a.Axes[i].AxisOrder.Values,h),f+=""!=l?","+l:"");""!=J&&(J=c("ExpandCollapse",J,QueryViewerExpandCollapseType.ExpandSomeValues,a.Axes[i].ExpandCollapse.Values,h),f+=""!=J?","+J:"");""!=E&&a.Axes[i].Filter.Values&&(E=c("Filter",E,QueryViewerFilterType.ShowSomeValues,a.Axes[i].Filter.Values,h),f+=""!=E?","+E:"");f+=""!=D?
","+D:"";f+=""!=u?","+u:"";f+=""!=t?","+t:"";f+="}"}k&&(f='"RuntimeFields":['+f+"]");return f}function c(a,b,h,l,k){var e="";if(""!=b){e=e+('"'+a+'":')+"{"+('"Type":"'+b+'"');strValues="";if(b==h){existValues=!1;for(j=0;void 0!=l[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=k?strValues+('"'+encodeURIComponent(l[j])+'"'):strValues+('"'+l[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}e+=strValues;e+="}"}return e}function o(a){var b="",h=!1;if(a.Object){a=eval(a.Object);
for(i=2;i<a.length;i++)h=!0,b+=""!=b?",":"",b+="{",b+='"Value":"'+encodeURIComponent(a[i])+'"',b+="}"}else for(i=0;void 0!=a.Parameters[i];i++)h=!0,b+=""!=b?",":"",b+="{",b+='"Name":"'+a.Parameters[i].Name+'"',b+=",",b+='"Value":"'+encodeURIComponent(a.Parameters[i].Value)+'"',b+="}";h&&(b='"RuntimeParameters":['+b+"]");return b}function k(a){var b="",h=!1;for(i=0;void 0!=a[i];i++){h=!0;b+=""!=b?",":"";b+="{";b+='"DataField":"'+a[i].DataField+'"';b+=",";b+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues=
"";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+
'"';existValues&&(strExcludedValues=',"Excluded":['+strExcludedValues+"]");b+=",";b+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";b+="}"}h&&(b='"Filters":['+b+"]");return b}function n(a){return a.UseRecordsetCache?'{"ActualKey":"'+a.RecordsetCache.ActualKey+'","OldKey":"'+a.RecordsetCache.OldKey+'","MinutesToKeep":'+a.MinutesToKeepInRecordsetCache+',"MaximumSize":'+a.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}
function l(b){var h;h=""+(""!=b.ApplicationNamespace?'"ApplicationNamespace":"'+b.ApplicationNamespace+'",':"");h+='"ParentPanel":"'+b.ParentPanel+'"';h+=",";b.Object?h+='"ObjectName":"'+a(b.Object)+'"':(h+='"ObjectName":"'+b.ObjectName+'"',h=h+","+('"Alt_ObjectType":"'+b.ObjectType+'"'),h=h+","+('"Alt_ObjectId":'+b.ObjectId));return h}return{DefaultOutput:function(a){a="{"+l(a);return"Data="+encodeURIComponent(a+"}")},RecordsetCacheKey:function(a){a="{"+l(a);return"Data="+encodeURIComponent(a+"}")},
Metadata:function(a){var c="",f=o(a),k=b(a,!0),c=c+"{"+l(a),c=c+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),c=c+(""!=f?","+f:"")+(""!=k?","+k:"")+","+('"OutputType":"'+a.RealType+'"'),c=c+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),c=c+","+('"RememberLayout":'+a.RememberLayout),c=c+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"'),c=c+","+('"RecordsetCacheInfo":'+n(a)),c=c+","+('"ReturnSampleData":'+a.ReturnSampleData),c=c+","+('"TranslationType":"'+a.TranslationType+
'"');return"Data="+encodeURIComponent(c+"}")},Data:function(a){var c="",f=o(a),k=b(a,!0),c=c+"{"+l(a),c=c+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),c=c+(""!=f?","+f:"")+(""!=k?","+k:"")+","+('"OutputType":"'+a.RealType+'"'),c=c+","+('"SortAscendingForced":'+d(a)),c=c+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),c=c+","+('"RecordsetCacheInfo":'+n(a)),c=c+","+('"ReturnSampleData":'+a.ReturnSampleData),c=c+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+
encodeURIComponent(c+"}")},AttributeValues:function(a,c,f,k,d){var e="",m=o(a),y=b(a,!0),e=e+"{"+l(a),e=e+","+('"DataField":"'+c+'"')+","+('"PageNumber":'+f)+","+('"PageSize":'+k)+","+('"Filter":"'+d+'"')+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),e=e+(""!=m?","+m:"")+(""!=y?","+y:"")+","+('"OutputType":"'+a.RealType+'"'),e=e+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),e=e+","+('"RecordsetCacheInfo":'+n(a)),e=e+","+('"ReturnSampleData":'+a.ReturnSampleData),e=e+","+
('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(e+"}")},TablePageData:function(a,c,f,d,r,e,m,y){var B="",v=o(a),s=b(a,!0),m=k(m),B=B+"{"+l(a),B=B+","+('"PageNumber":'+c)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?f:0)),B=B+","+('"ReturnTotPages":'+d)+","+('"Order":'+('{"DataField":"'+r+'","Type":"'+e+'"}'))+(""!=m?","+m:"")+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),B=B+(""!=v?","+v:"")+(""!=s?","+s:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),
B=B+","+('"RecordsetCacheInfo":'+n(a)),B=B+","+('"LayoutChanged":'+y)+","+('"ReturnSampleData":'+a.ReturnSampleData),B=B+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(B+"}")},PivotTablePageData:function(a,c,f,d,r,e,m,y,B){for(var v="",s=o(a),G=b(a,!0),p="",I=!1,A=0;void 0!=r[A];A++)I=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+r[A].DataField+'"',p+=",",p+='"Visible":'+!r[A].Hidden,p+=",",p+='"Axis":"'+r[A].Axis.Type+'"',p+=",",p+='"Position":'+(qv.util.IsInteger(r[A].Axis.Position)?
r[A].Axis.Position:0),p+=",",p+='"Order":"'+r[A].Order+'"',p+=",",p+='"Subtotals":'+r[A].Subtotals,p+="}";I&&(p='"AxesInfo":['+p+"]");r=p;p="";I=!1;for(A=0;void 0!=e[A];A++)I=!0,p+=""!=p?",":"",p+="{",p+='"DataField":"'+e[A].DataField+'"',p+=",",p+='"Visible":'+!e[A].Hidden,p+=",",p+='"Position":'+(qv.util.IsInteger(e[A].Position)?e[A].Position:0),p+="}";I&&(p='"DataInfo":['+p+"]");e=p;m=k(m);p="";I=!1;for(A=0;void 0!=y[A];A++){I=!0;p+=""!=p?",":"";p+="{";p+='"DataField":"'+y[A].DataField+'"';p+=
",";p+='"NullExpanded":'+y[A].NullExpanded;strExpandedValues="";existValues=!1;for(var z=0;void 0!=y[A].NotNullValues.Expanded[z];z++)existValues=!0,strExpandedValues+=""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(y[A].NotNullValues.Expanded[z])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+"]");strCollapsedValues="";existValues=!1;for(z=0;void 0!=y[A].NotNullValues.Collapsed[z];z++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+=
'"'+encodeURIComponent(y[A].NotNullValues.Collapsed[z])+'"';existValues&&(strCollapsedValues=',"Collapsed":['+strCollapsedValues+"]");p+=",";p+='"NotNullValues":{"DefaultAction":"'+y[A].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";p+="}"}I&&(p='"ExpandCollapse":['+p+"]");y=p;v=v+"{"+l(a);v=v+","+('"PageNumber":'+c)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?f:0));v=v+","+('"ReturnTotPages":'+d)+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"');v=v+","+('"TotalForRows":"'+
a.TotalForRows+'"');v=v+","+('"TotalForColumns":"'+a.TotalForColumns+'"');v=v+(""!=r?","+r:"")+(""!=e?","+e:"")+(""!=m?","+m:"")+(""!=y?","+y:"")+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:"");v=v+(""!=s?","+s:"")+(""!=G?","+G:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange);v=v+","+('"RecordsetCacheInfo":'+n(a));v=v+","+('"LayoutChanged":'+B)+","+('"ReturnSampleData":'+a.ReturnSampleData);v=v+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(v+
"}")},getQueryParameters:function(a){a="{"+l(a);return"Data="+encodeURIComponent(a+"}")},DashboardSpec:function(b){var h="";b.Object&&(h=a(b.Object));b=JSON.stringify({ApplicationNamespace:b.ApplicationNamespace,ObjectName:h,Alt_ObjectId:0});return"Data="+encodeURIComponent(b)},_priv:{RuntimeParametersJSON:function(a){return o(a)},RuntimeFieldsJSON:function(a){return b(a)},SdtWithValuesJSON:function(a,b,h,k,l){return c(a,b,h,k,l)}}}}(),RuntimeParametersJSON:function(a){return this.postInfo._priv.RuntimeParametersJSON(a)},
RuntimeFieldsJSON:function(a,b){return this.postInfo._priv.RuntimeFieldsJSON(a,b)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}},CallServerSync:function(a,b,c,k){k=k||[];k.unshift(a);a=b.call(qv.services.url,a);c=c.apply(qv.services.postInfo,k);k=qv.services.getXMLHttpRequest();k.open("POST",a,!1);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.send(c);return k.responseText},
createAsyncServerCallFn:function(a,b,c,k,d){return function(l,g){g=g||[];g.unshift(a);var q=function(b){d&&a.RealType!=QueryViewerOutputType.Card&&(b=d.call(qv.util.css,b));l(b,a)};if(gx.lang.gxBoolean(a.IsExternalQuery))q(a.ExternalQueryResultObj()[k]);else{var f=b.call(qv.services.url,a),x=c.apply(qv.services.postInfo,g),C=qv.services.getXMLHttpRequest(),e=function(){C.readyState==STATE_DONE&&C.status==STATUS_OK&&q(C.responseText)};gx.util.browser.isIE()?C.onreadystatechange=e:C.onload=e;C.open("POST",
f);C.setRequestHeader("Content-Type","application/x-www-form-urlencoded");C.send(x)}}},parseRecordsetCacheKeyXML:function(a){""!=a.xml.recordsetCacheKey&&(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.OldKey=a.RecordsetCache.ActualKey?a.RecordsetCache.ActualKey:"",a.RecordsetCache.ActualKey=a.xml.recordsetCacheKey)},parseDataXML:function(a){if(""!=a.xml.data){var b=qv.util.dom.xmlDocument(a.xml.data),b=qv.util.dom.getSingleElementByTagName(b,"Recordset");a.Data=a.Data||{};b=gx.util.browser.isIE()?
qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(b,"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(b,"Record");a.Data.Rows=[];for(var c=0;c<b.length;c++){for(var k={},d=0;d<b[c].childNodes.length;d++){var l=b[c].childNodes[d];1==l.nodeType&&(k[l.nodeName]=1==l.childNodes.length?l.childNodes[0].nodeValue:"")}a.Data.Rows.push(k)}}},parseMetadataXML:function(a){function c(a,b){if("greaterequal"==a&&"lessequal"==b)return QueryViewerConditionOperator.Interval;switch(a){case "equal":return QueryViewerConditionOperator.Equal;
case "less":return QueryViewerConditionOperator.LessThan;case "greater":return QueryViewerConditionOperator.GreaterThan;case "lessequal":return QueryViewerConditionOperator.LessOrEqual;case "greaterequal":return QueryViewerConditionOperator.GreaterOrEqual;case "notequal":return QueryViewerConditionOperator.NotEqual}}function d(a,b,e,c){var h={},a=qv.util.dom.getSingleElementByTagName(a,b);if(null!=a){h.GroupFound=!0;h.TotalValueFound=!1;e=qv.util.dom.getMultipleElementsByTagName(a,e);h.Values=[];
for(a=0;a<e.length;a++)b=null!=e[a].firstChild?e[a].firstChild.nodeValue:"","TOTAL"==b&&c?h.TotalValueFound=!0:h.Values.push(b)}else h.GroupFound=!1;return h}function k(a){if(0==a.indexOf("gxpl_cssReplace("))var b=a.indexOf("gxpl_cssReplace("),e=a.indexOf(")",b),a=a.substring(b+16,e);return a}function n(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],b=[],e=0;e<a.length;e++){var c={};c.Value=qv.util.trim(null!=a[e].firstChild?
a[e].firstChild.nodeValue:"");c.StyleOrClass=k(a[e].getAttribute("format"));c.ApplyToRowOrColumn="yes"==a[e].getAttribute("recursive");b.push(c)}return b}function l(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],b=[],e=0;e<a.length;e++){var h={};h.Operator=c(a[e].getAttribute("op1"),a[e].getAttribute("op2"));h.Value1=parseFloat(a[e].getAttribute("value1"));h.Operator==QueryViewerConditionOperator.Interval&&
(h.Value2=parseFloat(a[e].getAttribute("value2")));h.StyleOrClass=k(a[e].getAttribute("format"));b.push(h)}return b}if(""!=a.xml.metadata){var g=qv.util.dom.xmlDocument(a.xml.metadata),q=qv.util.dom.getSingleElementByTagName(g,"OLAPCube"),g=q.getAttribute("Version");if(null==g||parseInt(g)==METADATA_VERSION){a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=q.getAttribute("textForNullValues");var f=qv.util.dom.getMultipleElementsByTagName(q,"OLAPDimension");a.Metadata.Axes=[];for(g=0;g<f.length;g++){var x=
{};x.Name=f[g].getAttribute("name");x.Title=f[g].getAttribute("displayName");x.DataField=f[g].getAttribute("dataField");x.DataType=f[g].getAttribute("dataType");x.Visible=f[g].getAttribute("visible");x.Axis=f[g].getAttribute("axis");x.Picture=f[g].getAttribute("picture");if(""==x.Picture)switch(x.DataType){case QueryViewerDataType.Integer:x.Picture="ZZZZZZZZZZZZZZ9";break;case QueryViewerDataType.Real:x.Picture="ZZZZZZZZZZZZZZ9.99";break;case QueryViewerDataType.Date:x.Picture="99/99/9999";break;
case QueryViewerDataType.DateTime:x.Picture="99/99/9999 99:99:99";break;case QueryViewerDataType.GUID:x.Picture="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"}x.CanDragToPages=qv.util.dom.getBooleanAttribute(f[g],"canDragToPages",!0);x.RaiseItemClick=qv.util.dom.getBooleanAttribute(f[g],"raiseItemClick",!0);x.IsComponent=qv.util.dom.getBooleanAttribute(f[g],"isComponent",!1);x.Style=f[g].getAttribute("format");var C=d(f[g],"include","value",!0),e=d(f[g],"exclude","value",!0),m=d(f[g],"expand","value",!1),
y=d(f[g],"customOrder","Value",!1);x.Subtotals="no"==f[g].getAttribute("summarize")?QueryViewerSubtotals.No:e.GroupFound&&e.TotalValueFound?QueryViewerSubtotals.Hidden:QueryViewerSubtotals.Yes;x.Filter={};!C.GroupFound&&!e.GroupFound?(x.Filter.Type=QueryViewerFilterType.ShowAllValues,x.Filter.Values=[]):!C.GroupFound&&e.GroupFound&&0==e.Values.length&e.TotalValueFound?(x.Filter.Type=QueryViewerFilterType.ShowAllValues,x.Filter.Values=[]):C.GroupFound&&!e.GroupFound&&0==C.Values.length?(x.Filter.Type=
QueryViewerFilterType.HideAllValues,x.Filter.Values=[]):(x.Filter.Type=QueryViewerFilterType.ShowSomeValues,x.Filter.Values=C.Values);x.ExpandCollapse={};m.GroupFound?m.GroupFound&&0==m.Values.length?(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.CollapseAllValues,x.ExpandCollapse.Values=[]):(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandSomeValues,x.ExpandCollapse.Values=m.Values):(x.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandAllValues,x.ExpandCollapse.Values=[]);x.Order=
{};C=f[g].getAttribute("order");null==C?(x.Order.Type=QueryViewerAxisOrderType.None,x.Order.Values=[]):(x.Order.Type=qv.util.capitalize(C),x.Order.Values=x.Order.Type==QueryViewerAxisOrderType.Custom?y.Values:[]);x.ValuesStyles=n(f[g]);a.Metadata.Axes.push(x)}q=qv.util.dom.getMultipleElementsByTagName(q,"OLAPMeasure");a.Metadata.Data=[];for(g=0;g<q.length;g++)f={},f.Name=q[g].getAttribute("name"),f.Title=q[g].getAttribute("displayName"),f.DataField=q[g].getAttribute("dataField"),f.Aggregation=q[g].getAttribute("aggregation"),
f.DataType=q[g].getAttribute("dataType"),f.Visible=q[g].getAttribute("visible"),f.Picture=q[g].getAttribute("picture"),f.RaiseItemClick=qv.util.dom.getBooleanAttribute(q[g],"raiseItemClick",!0),f.IsComponent=qv.util.dom.getBooleanAttribute(q[g],"isComponent",!1),""==f.Picture&&(f.Picture=f.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),f.Aggregation=qv.util.capitalize(f.Aggregation),f.TargetValue=parseFloat(q[g].getAttribute("targetValue")),f.MaximumValue=parseFloat(q[g].getAttribute("maximumValue")),
f.Style=q[g].getAttribute("format"),0>=f.TargetValue&&(f.TargetValue=100),0>=f.MaximumValue&&(f.MaximumValue=100),f.ConditionalStyles=l(q[g]),x=qv.util.dom.getCharacterAttribute(q[g],"formula",""),f.IsFormula=""!=x,f.Formula=x,a.Metadata.Data.push(f);a.Metadata.ParserResult=b(!0,"")}else a.Metadata.ParserResult=b(!1,gx.getMessage("GXPL_QViewerWrongMetadataVersion").replace("{0}",METADATA_VERSION))}},GetDataIfNeeded:function(a,b){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||
{};void 0==a.xml.data||c(a,a.Data.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(b):b(a.xml.data,a)},GetMetadataIfNeeded:function(a,b){a.Metadata=a.Metadata||{};a.Metadata.LastServiceCallKey=a.Metadata.LastServiceCallKey||{};var c;if(!(c=void 0==a.xml.metadata)){c=a.Metadata.LastServiceCallKey;var d=qv.services.RuntimeFieldsJSON(a),n=qv.services.RuntimeParametersJSON(a),l;b:switch(a.RealType){case QueryViewerOutputType.Table:l="IgnoreType";break b;case QueryViewerOutputType.Chart:case QueryViewerOutputType.Card:l=
"IgnoreTypeAndAxis";break b;default:l="IgnoreNot"}a.ObjectName!=c.ObjectName||a.ObjectType!=c.ObjectType||a.ObjectId!=c.ObjectId||a.Object!=c.Object||d!=c.RuntimeFieldsJSON||n!=c.RuntimeParametersJSON||l!=c.MetadataType?(c.ObjectName=a.ObjectName,c.ObjectType=a.ObjectType,c.ObjectId=a.ObjectId,c.Object=a.Object,c.RuntimeFieldsJSON=d,c.RuntimeParametersJSON=n,c.MetadataType=l,c=!0):c=!1;c=c||gx.lang.gxBoolean(a.IsExternalQuery)}c?a.calculatePivottableMetadata(b):b(a.xml.metadata,a)},GetDashboardSpecIfNeeded:function(b,
c){b.DashboardSpec=b.DashboardSpec||"";b.LastServiceCallKey=b.LastServiceCallKey||{};var d;if(!(d=void 0==b.DashboardSpec))if(d=b.LastServiceCallKey,b.Object){var k=a(b.Object);k!=d.ObjectName?(d.ObjectName=k,d=!0):d=!1}else d=""==b.DashboardSpec;d?(b.LoadingSpec=!0,b.GetDashboardSpec(c)):c(b.DashboardSpec,b)},GetRecordsetCacheKeyIfNeeded:function(a,b){a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery)?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=a.RecordsetCache.LastServiceCallKey||
{},void 0==a.xml.recordsetCacheKey||c(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(b):b(a.xml.recordsetCacheKey,a)):b("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var c=qv.util.GetContainerControlClasses(a);""!=c&&qv.util.SetUserControlClass(a,c);c=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=c;var d=a.userControlId()+"_"+a.ObjectName.replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=d;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+d).length)if(a._ControlRenderedTo!=a.RealType&&a.RealType==QueryViewerOutputType.PivotTable){var o=
qv.util.dom.getEmptyContainer(a);a.Title&&qv.util.dom.createDiv(o,c.replace("_pivot_page","_title_div"),"","",{},"");qv.util.dom.createDiv(o,c,"","",{},"");qv.util.dom.createDiv(o,d,"","",{},"")}else a.Title&&jQuery("#"+a.ContainerName).find(".pivot_title_div").attr("id",c.replace("_pivot_page","_title_div")),jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",c),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",d);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=
a.RealType;a.pivotParams.ObjectName=a.ObjectName;a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=a.xml.metadata;c=gx.lang.gxBoolean(a.IsExternalQuery)?a.xml.data:a.RealType==QueryViewerOutputType.Table?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.data=c;a.pivotParams.UcId=a.userControlId();a.pivotParams.AutoResize=gx.lang.gxBoolean(a.AutoResize)||
gx.lang.gxBoolean(a.ShrinkToFit);a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.AllowSelection=
a.AllowSelection;a.pivotParams.SelectLine=!0;a.pivotParams.TotalForColumns=a.TotalForColumns;a.pivotParams.TotalForRows=a.TotalForRows;a.pivotParams.Title=qv.util.getTranslation(a.Title);void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,qv.collection,a)});a._ControlRenderedTo=a.RealType;a.RealType==QueryViewerOutputType.Table&&qv.util.hideActivityIndicator(a)}function c(b){for(var c="",d="",o=0;o<b.Metadata.Axes.length;o++){var k=
b.Metadata.Axes[o];if(k.Order.Type==QueryViewerAxisOrderType.Ascending||k.Order.Type==QueryViewerAxisOrderType.Descending){c=k.DataField;d=k.Order.Type;break}}b.getPageDataForTable(function(b,c){(new Date).getTime();qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(c,errMsg)):(""!=b&&(c.xml.pageData=b),a(c))},[1,b.PageSize,!0,c,d,[],!1])}function d(a,c){var d=[];if(null!=a)for(var o=-1,k=0;k<a.childNodes.length;k++)if("ITEM"==a.childNodes[k].nodeName){var n=a.childNodes[k].getAttribute("name");
if(0>c.indexOf(n)){o++;d[o]={};d[o].Name=n;d[o].Values=[];for(var n=-1,l=a.childNodes[k],g=0;g<a.childNodes[k].childNodes.length;g++)if("VALUES"==a.childNodes[k].childNodes[g].nodeName){l=a.childNodes[k].childNodes[g];break}for(g=0;g<l.childNodes.length;g++)"VALUE"==l.childNodes[g].nodeName&&(n++,d[o].Values[n]=null!=l.childNodes[g].firstChild?l.childNodes[g].firstChild.nodeValue:"")}}return d}return{tryToRenderPivotTable:function(b){var h="",d=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,
function(b,k){var n=!1;b!=k.xml.recordsetCacheKey&&(k.xml.recordsetCacheKey=b,n=!0);qv.util.anyError(b)?(h=qv.util.getErrorFromText(b),qv.util.renderError(k,h)):(n&&qv.services.parseRecordsetCacheKeyXML(k),qv.services.GetMetadataIfNeeded(k,function(b,g){var k=false;if(b!=g.xml.metadata){g.xml.metadata=b;k=true}var f=(new Date).getTime();if(qv.util.anyError(b)){h=qv.util.getErrorFromText(b);qv.util.renderError(g,h)}else{k&&qv.services.parseMetadataXML(g);if(g.Metadata.ParserResult.Success)if(g.ServerPagingForTable&&
g.RealType==QueryViewerOutputType.Table&&!gx.lang.gxBoolean(g.IsExternalQuery)){k=false;OAT.getStateWhenServingPaging&&(k=OAT.getStateWhenServingPaging(g.userControlId()+"_"+g.ObjectName,g.ObjectName));!k||!g.RememberLayout?c(g,d,f):a(g)}else if(g.ServerPagingForPivotTable&&g.RealType==QueryViewerOutputType.PivotTable&&!gx.lang.gxBoolean(g.IsExternalQuery)){k=false;OAT.getStateWhenServingPaging&&(k=OAT.getStateWhenServingPaging(g.userControlId()+"_"+g.ObjectName,g.ObjectName));a(g)}else qv.services.GetDataIfNeeded(g,
function(b,c){if(b!=c.xml.data)c.xml.data=b;(new Date).getTime();if(qv.util.anyError(b)){h=qv.util.getErrorFromText(b);qv.util.renderError(c,h)}else a(c)});else qv.util.renderError(g,g.Metadata.ParserResult.Message)}}))})},GetMetadataPivot:function(a){var c=qv.util.GetDesigntimeMetadata(a);if(0<c.length){for(var d=a.oat_element.getMetadataXML(),d=qv.pivot.GetRuntimeMetadata(d,a.RealType),o=[],a=qv.util.GetOrderedElementsKeys(a,d),k=0;k<a.length;k++)for(var n=parseInt(a[k].substr(6,4)),n=d[n],l,g=
0;g<c.length;g++)if(l=c[g],l.Name==n.Name){l=qv.util.cloneObject(l);qv.util.MergeFields(n,l);o.push(l);break}return o}return[]},GetRuntimeMetadata:function(a,c){function d(a,b,e,c,g){var b=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,b)),h=[];if(b==c&&(a=qv.util.dom.getSingleElementByTagName(a,e),null!=a)){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(e=0;e<a.length;e++)c=qv.util.trim(qv.util.dom.getValueNode(a[e])),null!=c&&("TOTAL"!=c.toUpperCase()||!g)&&h.push(c)}return{Type:b,
Values:h}}var o=qv.util.dom.xmlDocument(a),o=qv.util.dom.getSingleElementByTagName(o,"OLAPCube"),k=[],n;n=qv.util.dom.getMultipleElementsByTagName(o,"OLAPDimension");for(var l=0;l<n.length;l++){var g={},q=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"name")),f="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"hidden")),x=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"axis")),C=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],
"position")),e=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"summarize")),m=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"order"));g.Name=q;g.Type=QueryViewerElementType.Axis;g.Hidden=f;g.Axis=null!=x&&""!=x&&"null"!=x?qv.util.capitalize(x):null;g.Position=C;g.Order=null!=m&&""!=m&&"null"!=m?qv.util.capitalize(m):null;c==QueryViewerOutputType.Table?(g.Filter=d(n[l],"","include",null,!0),g.Filter.Type=QueryViewerFilterType.ShowSomeValues):(g.Subtotals=
"no"==e?QueryViewerSubtotals.No:QueryViewerSubtotals.Yes,g.Filter=d(n[l],"filterType","include",QueryViewerFilterType.ShowSomeValues,!0),g.ExpandCollapse=d(n[l],"collapseType","includeExpand",QueryViewerExpandCollapseType.ExpandSomeValues,!1));k.push(g)}n=qv.util.dom.getMultipleElementsByTagName(o,"OLAPMeasure");for(l=0;l<n.length;l++)g={},q=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"name")),f="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"hidden")),
C=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(n[l],"position")),g.Name=q,g.Type=QueryViewerElementType.Datum,g.Hidden=f,g.Position=C,k.push(g);return k},GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},onOAT_PIVOTDragAndDropEvent:function(a,c){if(a.RealType==QueryViewerOutputType.PivotTable&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c),a.DragAndDrop)){var d=qv.util.dom.xmlDocument(c),
d=qv.util.dom.selectXPathNode(d,"/DATA");a.DragAndDropData.Name=d.getAttribute("name");a.DragAndDropData.Type=QueryViewerElementType.Axis;axis=d.getAttribute("axis");a.DragAndDropData.Axis="rows"==axis?QueryViewerAxisType.Rows:"columns"==axis?QueryViewerAxisType.Columns:QueryViewerAxisType.Pages;a.DragAndDropData.Position=d.getAttribute("position");a.DragAndDrop()}},onItemClickEvent:function(a,c,r){var o,k;if(a.ItemClick&&!r||a.ItemDoubleClick&&r){k=r?k=a.ItemDoubleClickData:a.ItemClickData;var n=
qv.util.dom.xmlDocument(c),l=qv.util.dom.selectXPathNode(n,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(n,"/DATA/CONTEXT/RELATED"),n=qv.util.dom.selectXPathNode(n,"/DATA/CONTEXT/FILTERS");k.Name=l.getAttribute("name");o=l.getAttribute("location");switch(o){case "rows":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Rows;break;case "columns":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Columns;break;case "pages":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Pages;
break;default:k.Type=QueryViewerElementType.Datum,k.Axis=""}k.Value=null!=l.firstChild?l.firstChild.nodeValue:"";k.Selected="true"==l.getAttribute("selected");l=[];for(o=0;o<a.Metadata.Axes.length;o++)a.Metadata.Axes[o].IsComponent&&l.push(a.Metadata.Axes[o].Name);for(o=0;o<a.Metadata.Data.length;o++)a.Metadata.Data[o].IsComponent&&l.push(a.Metadata.Data[o].Name);k.Context=d(c,l);k.Filters=d(n,l);r?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,c,d){var o;IsQueryObjectPreview()&&
window.external.SendText(a.ControlName,c);if(a.ItemExpand&&!d||a.ItemCollapse&&d){o=d?o=a.ItemCollapseData:a.ItemExpandData;var c=qv.util.dom.xmlDocument(c),k=qv.util.dom.selectXPathNode(c,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(c,"/DATA/CONTEXT/EXPANDEDVALUES");o.Name=k.getAttribute("name");o.Value=k.firstChild.nodeValue;o.ExpandedValues=[];for(var k=-1,n=0;n<c.childNodes.length;n++)"VALUE"==c.childNodes[n].nodeName&&(k++,o.ExpandedValues[k]=c.childNodes[n].firstChild.nodeValue);d?a.ItemCollapse():
a.ItemExpand()}},Select:function(a,c){a.oat_element.selectValue(c)},Deselect:function(a){a.oat_element.deselectValue()}}}();var HCChart,_highChartsDrawPointsWrapped,DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return a.RealChartType==QueryViewerChartType.Timeline||a.RealChartType==QueryViewerChartType.SmoothTimeline||a.RealChartType==QueryViewerChartType.StepTimeline}function c(b){return a(b)||b.RealChartType==QueryViewerChartType.Sparkline}function d(a){return a.RealChartType==QueryViewerChartType.Pie||a.RealChartType==QueryViewerChartType.Pie3D||a.RealChartType==QueryViewerChartType.Doughnut||a.RealChartType==QueryViewerChartType.Doughnut3D}function b(a){return a.RealChartType==
QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid}function h(a){return a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea}function r(a){return(a.RealChartType==QueryViewerChartType.ColumnLine||a.RealChartType==QueryViewerChartType.Column3DLine)&&1<a.Chart.Series.DataFields.length}function o(a){return a.RealChartType==QueryViewerChartType.CircularGauge||a.RealChartType==QueryViewerChartType.LinearGauge}
function k(a){return a.RealChartType==QueryViewerChartType.StackedColumn||a.RealChartType==QueryViewerChartType.StackedColumn3D||a.RealChartType==QueryViewerChartType.StackedColumn100||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.StackedLine||a.RealChartType==QueryViewerChartType.StackedLine100?!1:(a.PlotSeries==
QueryViewerPlotSeries.InSeparateCharts||d(a)||b(a))&&1<a.Chart.Series.DataFields.length}function n(a,b){for(var e=[],c=0;c<a.Charts.length;c++)for(var g=0;g<a.Charts[c].series.length;g++)e.push(a.Charts[c].series[g].data[b]);return e}function l(a,b,c,e,g){for(var d=0;d<a.Charts.length;d++)if(b.id!=a.Charts[d].container.id)for(var m=0;m<a.Charts[d].series.length;m++){var h=a.Charts[d].series[m].data[c];e?(g&&h.setState("hover"),a.Charts[d].tooltip.hide(0)):h.setState()}}function g(a){switch(a){case QueryViewerChartType.Column:case QueryViewerChartType.Column3D:case QueryViewerChartType.StackedColumn:case QueryViewerChartType.StackedColumn3D:case QueryViewerChartType.StackedColumn100:case QueryViewerChartType.PolarArea:return"column";
case QueryViewerChartType.Bar:case QueryViewerChartType.StackedBar:case QueryViewerChartType.StackedBar100:case QueryViewerChartType.LinearGauge:return"bar";case QueryViewerChartType.Area:case QueryViewerChartType.StackedArea:case QueryViewerChartType.StackedArea100:case QueryViewerChartType.FilledRadar:case QueryViewerChartType.StepArea:return"area";case QueryViewerChartType.SmoothArea:return"areaspline";case QueryViewerChartType.Line:case QueryViewerChartType.StackedLine:case QueryViewerChartType.StackedLine100:case QueryViewerChartType.Radar:case QueryViewerChartType.Timeline:case QueryViewerChartType.StepTimeline:case QueryViewerChartType.Sparkline:case QueryViewerChartType.StepLine:return"line";
case QueryViewerChartType.SmoothLine:case QueryViewerChartType.SmoothTimeline:return"spline";case QueryViewerChartType.ColumnLine:case QueryViewerChartType.Column3DLine:return"column";case QueryViewerChartType.Pie:case QueryViewerChartType.Pie3D:case QueryViewerChartType.Doughnut:case QueryViewerChartType.Doughnut3D:return"pie";case QueryViewerChartType.Funnel:return"funnel";case QueryViewerChartType.Pyramid:return"pyramid";case QueryViewerChartType.CircularGauge:return"solidgauge";default:return"line"}}
function q(a,b,c,e,g,d,m){function h(a,b){var e={};e.Name=a.Name;var c=qv.util.GetPictureProperties(a.DataType,a.Picture),c=qv.util.ApplyPicture(b,a.Picture,a.DataType,c);e.Values=[c];return e}a.Name=c;a.Type=e;a.Axis="";a.Value=g;a.Selected=d;a.Context=[];for(c=0;c<b.Metadata.Axes.length;c++)e=b.Metadata.Axes[c],e.IsComponent||(e=h(e,m[e.DataField]),a.Context.push(e));for(c=0;c<b.Metadata.Data.length;c++)e=b.Metadata.Data[c],e.IsComponent||(e=h(e,m[e.DataField]),a.Context.push(e));a.Filters=[]}function f(a,
b){for(var e=!1,c=0;c<a.length;c++)for(var g=a[c],d=0;d<g.series.length;d++){var m=g.series[d].points[b];if(m.selected){m.select();break}else m.select(!0,0<d),e=!0}return e}function x(a){for(var b=0;b<a.length;b++){var e=a[b].getSelectedPoints();0<e.length&&e[0].select(!1,!1)}}function C(a){var b=qv.collection[this.chart.options.qv.viewerId],e=k(b)?this.chart.options.qv.seriesIndex:a.point.series.index,c=!1;if(b.SelectionAllowed())if("Point"==b.SelectionType){if(a.point.select(),c=a.point.selected,
b.PlotSeries==QueryViewerPlotSeries.InSeparateCharts&&c)for(var g=0;g<b.Charts.length;g++){var d=b.Charts[g].series[0].points[a.point.index];d!=a.point&&d.select(!1)}}else c=f(b.Charts,a.point.index);b.ItemClick&&b.Metadata.Data[e].RaiseItemClick&&(e=b.Chart.Series.ByIndex[e],g=qv.util.formatNumber(a.point.y,e.NumberFormat.DecimalPrecision,e.Picture,!1),q(b.ItemClickData,b,e.FieldName,QueryViewerElementType.Datum,g,c,b.Data.Rows[a.point.index]),b.ItemClick())}function e(a){return qv.util.dom.createSpan(null,
"","","",{fontWeight:"bold"},null,a).outerHTML}function m(a){return qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",textAlign:"right"},null,a).outerHTML}function y(a,b){k(b);var e=Math.min(b.getContainerControl().offsetHeight,b.getContainerControl().offsetWidth)/(k(b)?b.Chart.Series.DataFields.length:1)/13;return qv.util.dom.createSpan(null,"","","",{color:z(b,a),fontSize:e+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function B(a,b,c){if(c){var g;a.points?
(c=a.points[0],g=c.point.index):(c=a.point,g=c.index);c=qv.collection[c.series.chart.options.qv.viewerId];g=n(c,g);var d=!a.key?!a.x?"":a.x:a.key,a=""!=d&&c.RealChartType!=QueryViewerChartType.Sparkline,h="";a&&(qv.util.isRTL(c)?h+=m(d):h+=e(d));for(var f=0;f<g.length;f++){var k=g[f],d=k.series.chart.options.qv.seriesIndex,d=b[d];qv.util.isRTL(c)?(h+=(a||0<f?"<br/>":"")+qv.util.formatNumber(k.y,d.NumberFormat.DecimalPrecision,d.Picture,!1),h+=" :"+k.series.name):(h+=(a||0<f?"<br/>":"")+k.series.name+
": ",h+=qv.util.formatNumber(k.y,d.NumberFormat.DecimalPrecision,d.Picture,!1))}return h}c=qv.collection[a.series.chart.options.qv.viewerId];d=a.series.index;d=b[d];b=o(c)?"ZZZZZZZZZZZZZZ9.99":d.Picture;g=o(c)?2:d.NumberFormat.DecimalPrecision;h=o(c);return qv.util.isRTL(c)?(o(c)?"%":"")+qv.util.formatNumber(a.point.y,g,b,h)+"<b>: "+(""!=a.point.name?a.point.name:a.series.name)+"<b>":"<b>"+(""!=a.point.name?a.point.name:a.series.name)+"</b>: "+qv.util.formatNumber(a.point.y,g,b,h)+(o(c)?"%":"")}function v(a,
b){function c(a){for(var b=a.y,e=a.series.data,a=a.index,d="",d=a,g=a+1;g<e.length&&e[g].y==b;g++)d=g;d<e.length-1&&d++;for(var h=a,g=a-1;0<=g&&e[g].y==b;g--)h=g;b=(e[d].x-e[h].x)/1E3;return d=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(b)+")"}var d,g=a.points[0].series.chart.options.qv.viewerId,h=qv.collection[g];k(h)?d=n(h,a.points[0].point.index):(d=[],jQuery.each(a.points,function(a,b){d.push(b.point)}));for(var f={},g=gx.dom.el(g+"_options_compare_enable").checked,l=
0;l<d.length;l++){var A=(g?Math.trunc(d[l].series.index/2):d[l].series.index).toString();void 0==f[A]&&(f[A]=[]);f[A].push(d[l])}var l="",s,v;for(A in f)for(var y=parseInt(A),y=b[y],t=y.Name,p=f[A],u=0;void 0!=p[u];u++){var w=p[u],z=parseInt(w.real_x?w.real_x:w.x);g?v!=t&&(qv.util.isRTL(h)?l+=m(t)+"<br/>":l+=e(t)+"<br/>",v=t):s!=z&&(qv.util.isRTL(h)?l+=m(w.name)+"<br/>":l+=e(w.name)+"<br/>",s=z);var z=h.RealChartType==QueryViewerChartType.StepTimeline?c(w):"",B,G=qv.util.dom.createSpan(null,"","",
"",{},null,qv.util.formatNumber(w.y,y.NumberFormat.DecimalPrecision,y.Picture,!1)).outerHTML;qv.util.isRTL(h)?B=qv.util.dom.createSpan(null,"","","",{},null,": "+(g?w.name:t)).outerHTML:B=qv.util.dom.createSpan(null,"","","",{},null,(g?w.name:t)+": ").outerHTML;qv.util.isRTL(h)?l+=z+G+B+"<br/>":l+=B+G+z+"<br/>"}return l}function s(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){u(U,"none");U=null;if(a.xAxis){var b=a.target.options.qv,
c=a.xAxis[0];da(a.target.options.qv.viewerId,100*((c.min-b.dataMin)/(b.dataMax-b.dataMin)),100*((c.max-b.dataMin)/(b.dataMax-b.dataMin)))}else da(a.target.options.qv.viewerId,0,100);b=qv.collection[a.target.options.qv.viewerId];if(k(b)){var b=b.getContainerControl().id,b=jQuery("[id^="+b+"_chart]"),e=[];jQuery.each(b,function(b,c){if(c.id!=a.target.renderTo.id){var g=jQuery("#"+c.id).highcharts();e.push(g)}});jQuery.each(e,function(b,e){a.xAxis?e.get("xaxis").setExtremes(c.min,c.max):(_avoidSelectionEventHandler=
!0,e.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function G(a,b,c,e,g){function d(a,b,c,e,g){function h(a,b){return a==QueryViewerDataType.Date?10==b.length:" "==b.charAt(10)}function m(a,b,c,e,g){var d=a.substr(0,4),h=a.substr(5,2),a=a.substr(8,2);e||(b=b.replace("M",""));g||(b=b.replace("D",""));for(var f="",k=0;k<b.length;k++)f+=0==k?"":"/",f+=b.charAt(k);b=f.replace("Y",c?d:d.substr(2,2));e&&(b=b.replace("M",h));g&&(b=b.replace("D",a));return b}var f,k;if(""!=a)switch(g=g||(c==QueryViewerDataType.Date?
"Days":"Seconds"),g){case "Years":f=a.substr(0,4)+"-01-01";k=m(f,e,h(c,b),!1,!1);break;case "Months":f=a.substr(0,7)+"-01";k=m(f,e,h(c,b),!0,!1);break;case "Semesters":f="06">=a.substr(5,2)?"01":"07";f=a.substr(0,5)+f+"-01";g="06">=a.substr(5,2)?"01":"02";dateStrSemester=a.substr(0,5)+g+"-01";k=m(dateStrSemester,e,h(c,b),!0,!1);break;case "Quarters":f="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";f=a.substr(0,5)+f+"-01";g="03">=a.substr(5,2)?"01":"06">=a.substr(5,
2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+g+"-01";k=m(dateStrQuarter,e,h(c,b),!0,!1);break;case "Weeks":a=new gx.date.gxdate(a,"Y4MD");f=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(f-1));f=qv.util.dateToString(a,!1);k=m(f,e,h(c,b),!0,!0);break;case "Days":f=c==QueryViewerDataType.Date?a:a.substr(0,10);k=c==QueryViewerDataType.Date?b:b.substr(0,10);break;case "Hours":f=a.substr(0,13)+":00:00";k=b.substr(0,13)+":00";break;case "Minutes":f=a.substr(0,16)+":00";k=b.substr(0,16);
break;case "Seconds":f=a,k=b}else k=f="";return{dateStr:f,name:k}}var h;h={dateStr:null,name:null};var m=[],f=[],k=[];for(i=0;i<b.length;i++){var l=a.Values[i].ValueWithPicture,A=a.Values[i].Value,s,v;null!=b[i].Value?e==QueryViewerAggregationType.Count?(s=0,v=parseFloat(qv.util.trim(b[i].Value))):e==QueryViewerAggregationType.Average?(s=parseFloat(qv.util.trim(b[i].Value_N)),v=parseFloat(qv.util.trim(b[i].Value_D))):(s=parseFloat(qv.util.trim(b[i].Value)),v=1):(s=null,v=0);l=d(A,l,c,gx.dateFormat,
g);l.dateStr==h.dateStr||0==i?(null!=s&&(m.push(s),f.push(v)),0==i&&(h=l)):(h={x:h.dateStr,y:qv.util.aggregate(e,m,f),name:h.name},k.push(h),h=l,m=[s],f=[v])}0<m.length&&0<f.length&&(h={x:h.dateStr,y:qv.util.aggregate(e,m,f),name:h.name},k.push(h));return k}function p(b){var c,e,g;a(b)?(b=DEFAULTCHARTSPACING,c=0,e=DEFAULTCHARTSPACING,g=0):g=e=c=b=DEFAULTCHARTSPACING;return[b,c,e,g]}function I(a,b){var c,e;c=3>=a?24:50/(a-1)-1;e=100-(c+1)*(b-1);return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+
c/2}}function A(a,b){var c=1/a/2,e=-0.5+(b-0.5)/a;return{Width:c,Center:e,LowerExtreme:e-c/2,UpperExtreme:e+c/2}}function z(a,b){function c(a){function b(a,e,c,g){g||(g=0);for(var d=0;d<e.length;d++){var h=e[d];if(h instanceof CSSStyleRule){if(h.selectorText&&0==h.selectorText.indexOf(c)){var f=h.selectorText.replace(c,"");a[f]=h.style.fill;g++}if(g===HIGHCHARTS_MAX_COLORS)break}else h instanceof CSSImportRule?b(a,h.styleSheet.rules||h.styleSheet.cssRules,c,g):h instanceof CSSLayerBlockRule&&b(a,
h.cssRules,c,g)}}if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var e={},g,d;g=qv.util.GetQueryViewerStyleSheet(a);b(e,g.cssRules,".highcharts-color-");""!=a.Class&&(g=qv.util.GetThemeStyleSheet(a),d="."+qv.util.GetContainerControlClass(a)+" .highcharts-color-",b(e,g.cssRules,d));for(g=0;g<HIGHCHARTS_MAX_COLORS;g++)a._HighchartsDefaultColors.push(e[g.toString()])}return a._HighchartsDefaultColors}var e;e=b.className&&0==b.className.indexOf("highcharts-color-")?parseInt(b.className.replace("highcharts-color-",
"")):b.colorIndex;e<HIGHCHARTS_MAX_COLORS?e=c(a)[e]:(e=HIGHCHARTS_CUSTOM_COLOR[e-HIGHCHARTS_MAX_COLORS],qv.util.color.IsHexaColor(e)&&(e="#"+e));return e}function F(a,b,e,c){if(!qv.util.IsNullColor(e)){if(e.IsDefault)a=e.ColorIndex;else{var g=e.Color,e=HIGHCHARTS_CUSTOM_COLOR.indexOf(g);if(0>e){HIGHCHARTS_CUSTOM_COLOR.push(g);var e=HIGHCHARTS_CUSTOM_COLOR.length-1,e=HIGHCHARTS_MAX_COLORS+e,d=qv.util.color.IsHexaColor(g)?"#":"",g="."+HIGHCHARTS_COLOR_PREFIX+e+" {fill: "+d+g+"; stroke: "+d+g+";}",a=
qv.util.GetThemeStyleSheet(a);a.insertRule(g,a.cssRules.length)}else e=HIGHCHARTS_MAX_COLORS+e;a=e}c?b.colorIndex=a:b.className=HIGHCHARTS_COLOR_PREFIX+a}}function J(f,t,u){var w=qv.util.XAxisDataType(f)==QueryViewerDataType.Date?"Days":"Seconds",z={qv:{}};z.qv.viewerId=f.userControlId();z.qv.seriesIndex=u;z.chart=function(b,e){var c={styledMode:!0};c.spacing=p(b);if(k(b)){var d=b.userControlId(),d=a(b)?V(d):d;c.renderTo=document.getElementById(d+"_chart"+e.toString())}else c.renderTo=a(b)?document.getElementById(V(b.userControlId())):
b.getContainerControl();r(b)||(c.type=g(b.RealChartType));b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea?c.polar=!0:b.RealChartType==QueryViewerChartType.Column3D||b.RealChartType==QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.Column3DLine?c.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D?
c.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(c.zoomType="x",c.resetZoomButton={theme:{display:"none"}},c.events={},c.events.selection=function(a){s(a)});return c}(f,u);z.credits={enabled:!1};z.legend={enabled:1<f.Chart.Series.DataFields.length&&!k(f)||d(f)||b(f),margin:0,rtl:qv.util.isRTL(f)};z.title=""==f.Title?{text:null}:{text:null==u||0==u?qv.util.getTranslation(f.Title):null};z.subtitle=function(a,e){var c={};if(k(a)&&(d(a)||b(a)||a.RealChartType==QueryViewerChartType.CircularGauge))c.text=
e.Name,c.floating=!0,c.align=qv.util.isRTL(a)?"right":"left",c.verticalAlign="middle";return c}(f,t);z.pane=function(a,b){var e={};if(a.RealChartType==QueryViewerChartType.CircularGauge){e.background=[];var c;k(a)&&(c=I(1,1));for(var g=0;g<a.Chart.Series.ByIndex.length;g++)if(!k(a)||g==b){var d=a.Chart.Series.ByIndex[g],h={};k(a)||(c=I(a.Chart.Series.DataFields.length,g+1));h.outerRadius=c.UpperExtreme.toString()+"%";h.innerRadius=c.LowerExtreme.toString()+"%";d=qv.util.IsNullColor(d.Color)?d.Points[0].Color:
d.Color;F(a,h,d,!1);h.borderWidth=0;e.background.push(h)}}return e}(f,u);z.xAxis=function(a,b){xAxis={tickWidth:1,tickLength:10};xAxis.reversed=qv.util.isRTL(a);if(a.RealChartType!=QueryViewerChartType.CircularGauge){var e=c(a);if(a.RealChartType!=QueryViewerChartType.Radar&&a.RealChartType!=QueryViewerChartType.FilledRadar&&a.RealChartType!=QueryViewerChartType.PolarArea&&a.RealChartType!=QueryViewerChartType.LinearGauge&&a.RealChartType!=QueryViewerChartType.Sparkline){var g=xAxis,d="";if(""==a.XAxisTitle)for(var f=
0;f<a.Metadata.Axes.length;f++){var m=a.Metadata.Axes[f];if(m.Visible==QueryViewerVisible.Yes||m.Visible==QueryViewerVisible.Always)d+=(""==d?"":", ")+qv.util.getTranslation(m.Title)}else d=qv.util.getTranslationAlsoIfStatic(a.XAxisTitle);g.title={text:d}}else{a.RealChartType==QueryViewerChartType.Sparkline&&k(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[b].Name});xAxis.lineWidth=0;if(a.RealChartType==QueryViewerChartType.LinearGauge||a.RealChartType==QueryViewerChartType.Sparkline)xAxis.tickPositions=
[];xAxis.tickmarkPlacement=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"on":"between"}if(a.RealChartType==QueryViewerChartType.LinearGauge){var l;k(a)&&(l=A(1,1));xAxis.plotBands=[];for(g=0;g<a.Chart.Series.ByIndex.length;g++)if(!k(a)||g==b)d=a.Chart.Series.ByIndex[g],k(a)||(l=A(a.Chart.Series.DataFields.length,g+1)),plotBand={},d=qv.util.IsNullColor(d.Color)?d.Points[0].Color:d.Color,F(a,plotBand,d,!1),plotBand.from=l.LowerExtreme,plotBand.to=l.UpperExtreme,
xAxis.plotBands.push(plotBand)}e||(xAxis.categories=[]);l=!1;for(g=0;g<a.Chart.Categories.Values.length;g++)""!=a.Chart.Categories.Values[g].ValueWithPicture&&(l=!0),e||(xAxis.categories[g]=a.Chart.Categories.Values[g].ValueWithPicture);if(e)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,qv.util.XAxisDataType(a)==QueryViewerDataType.Date&&(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(e=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,
"Y4MD")).Value.getTime()-e.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=l,a.XAxisLabels!=QueryViewerXAxisLabels.Horizontally&&!(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)&&!h(a))a.XAxisLabels==QueryViewerXAxisLabels.Vertically?(e=90,l=5):(e=parseInt(a.XAxisLabels.replace("Rotated","")),l=10),xAxis.labels.rotation=360-e,xAxis.labels.y=l,xAxis.labels.align=
"right";h(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":a.RealChartType==QueryViewerChartType.Sparkline&&(xAxis.className="highcharts-no-axis-line highcharts-no-grid-line");if(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)xAxis.opposite=qv.util.isRTL(a)}return xAxis}(f,u);z.yAxis=function(a,e,c){function g(a){if(0==a.length)return!1;for(var b,e=0;e<a.length;e++)if(0==e)b=a[e].Picture;
else if(a[e].Picture!=b)return!1;return!0}if(a.RealChartType==QueryViewerChartType.Sparkline)yAxis={visible:!1};else{var h;h=a.RealChartType==QueryViewerChartType.CircularGauge?null:k(a)?e.Name:E(a);r(a)&&!k(a)?(yAxis=[],yAxis[0]={title:{text:h}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:h}};yAxis.plotLines=[];yAxis.plotBands=[];if(!d(a)&&!b(a)&&!o(a)){for(var f=0;f<a.Chart.PlotBands.length;f++){var m=a.Chart.PlotBands[f];if(null==e||e.Name==m.SeriesName)m.From==m.To&&null!=m.From?
(h={value:m.From,width:1,zIndex:3},F(a,h,m.Color,!1),yAxis.plotLines.push(h)):(h={},F(a,h,m.Color,!1),h.from=!m.From?Number.MIN_VALUE:m.From,h.to=!m.To?Number.MAX_VALUE:m.To,yAxis.plotBands.push(h))}if(k(a)||1==a.Chart.Series.ByIndex.length||g(a.Chart.Series.ByIndex)){var l=k(a)?e:a.Chart.Series.ByIndex[0];yAxis.labels={};yAxis.labels.formatter=function(){return qv.util.formatNumber(this.value,l.NumberFormat.DecimalPrecision,l.Picture,true)}}}if(a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==
QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea)yAxis.min=0,yAxis.gridLineInterpolation=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"polygon":"circle";if(o(a)){yAxis.min=0;for(f=yAxis.max=0;f<a.Chart.Series.ByIndex.length;f++)if(!k(a)||f==c)h=a.Chart.Series.ByIndex[f],yAxis.max=Math.max(yAxis.max,100*h.MaximumValue/h.TargetValue);if(a.RealChartType==QueryViewerChartType.LinearGauge||100!=yAxis.max){h={className:"highcharts-dashed-plot-line",
value:100};if(k(a)||1==a.Chart.Series.DataFields.length)c=k(a)?e:a.Chart.Series.ByIndex[0],a.RealChartType==QueryViewerChartType.LinearGauge?(e=-10,f=-5,m="right"):(e=15,f=0,m="center"),h.label={text:c.TargetValue,verticalAlign:"bottom",rotation:0,y:e,x:f,align:m};yAxis.plotLines.push(h)}}a.RealChartType==QueryViewerChartType.LinearGauge?(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",yAxis.labels={enabled:!1}):a.RealChartType==QueryViewerChartType.CircularGauge&&(yAxis.lineWidth=
0,yAxis.tickPositions=[]);a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.LinearGauge?yAxis.reversed=qv.util.isRTL(a):yAxis.opposite=qv.util.isRTL(a);f=e=!1;for(c=0;c<a.Chart.Series.ByIndex.length;c++)h=a.Chart.Series.ByIndex[c],h.PositiveValues&&(e=!0),h.NegativeValues&&(f=!0);if(!f&&!e)r(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0,yAxis[0].max=1,yAxis[1].max=1):(yAxis.min=
0,yAxis.max=1);else if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)&&(f||(r(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0),!e))r(a)&&!k(a)?(yAxis[0].max=0,yAxis[1].max=0):yAxis.max=0}return yAxis}(f,t,u);z.plotOptions=function(b,e){function c(a){var e;e=k(a)||1==a.Chart.Series.DataFields.length?23*(k(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-e}function g(a){var e={radius:3,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(e.states.select=
{radius:5,lineWidth:1});return e}function d(a,e,b){e=e.touchingSliceAt;return["M",a.x+("left"===a.alignment?1:-1)*b.connectorPadding,a.y,"L",e.x,a.y,"L",e.x,e.y]}var h=gx.lang.gxBoolean(e.ShowValues),f={series:{}};f.series.events={};e.RealChartType==QueryViewerChartType.CircularGauge?(f.series.dataLabels={},f.series.dataLabels.enabled=1==e.Chart.Series.DataFields.length&&gx.lang.gxBoolean(e.ShowValues)||k(e),f.series.dataLabels.y=0,f.series.dataLabels.borderWidth=0,f.series.dataLabels.formatter=function(){return y(this,
e)},f.series.marker={enabled:!1}):h&&(f.series.dataLabels={},f.series.dataLabels.enabled=!0,f.series.dataLabels.connectorColor="#000000",f.series.dataLabels.formatter=function(){var a=k(e)?this.series.chart.options.qv.seriesIndex:this.series.index,a=a%e.Chart.Series.ByIndex.length,a=e.Chart.Series.ByIndex[a];return qv.util.formatNumber(this.point.y*(e.RealChartType==QueryViewerChartType.LinearGauge?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,!1)},e.RealChartType==QueryViewerChartType.LinearGauge&&
(f.series.dataLabels.inside=!0));if(k(e)&&e.RealChartType!=QueryViewerChartType.CircularGauge){f.series.point={};f.series.point.events={};var m=e.RealChartType!=QueryViewerChartType.LinearGauge;f.series.point.events.mouseOver=function(){l(e,this.series.chart.container,this.index,true,m)};f.series.point.events.mouseOut=function(){l(e,this.series.chart.container,this.index,false,m)}}if(e.ItemClick||e.SelectionAllowed())f.series.events.click=C;switch(b){case "bar":f.bar={};e.RealChartType==QueryViewerChartType.StackedBar?
(f.series.stacking="normal",f.bar.stacking="normal"):e.RealChartType==QueryViewerChartType.StackedBar100&&(f.series.stacking="percent",f.bar.stacking="percent");if(e.RealChartType==QueryViewerChartType.LinearGauge){h=A(e.Chart.Series.DataFields.length,1).Width*c(e);f.bar.pointWidth=h;f.bar.pointPadding=0;f.bar.groupPadding=0;for(var s=Number.MAX_VALUE,ca=0;ca<e.Chart.Series.DataFields.length;ca++){var v=e.Chart.Series.ByIndex[ca],v=v.Points[0].Value/v.TargetValue;v<s&&(s=v)}s*=e.getContainerControl().offsetWidth;
f.bar.borderRadius=Math.min(h/2,s/2)}break;case "column":f.column={};e.RealChartType==QueryViewerChartType.StackedColumn||e.RealChartType==QueryViewerChartType.StackedColumn3D||e.RealChartType==QueryViewerChartType.PolarArea?(f.series.stacking="normal",f.column.stacking="normal"):e.RealChartType==QueryViewerChartType.StackedColumn100&&(f.series.stacking="percent",f.column.stacking="percent");e.RealChartType==QueryViewerChartType.PolarArea&&(f.column.pointPadding=0,f.column.groupPadding=0);break;case "area":f.area=
{};e.RealChartType==QueryViewerChartType.StepArea&&(f.area.step="center");f.area.marker=g(e);e.RealChartType==QueryViewerChartType.StackedArea?f.area.stacking="normal":e.RealChartType==QueryViewerChartType.StackedArea100&&(f.area.stacking="percent");break;case "areaspline":f.areaspline={};f.areaspline.marker=g(e);break;case "line":f.line={};f.line.marker=g(e);e.RealChartType==QueryViewerChartType.StepLine?f.line.step="center":e.RealChartType==QueryViewerChartType.StepTimeline&&(f.line.step="left");
a(e)?f.series.connectNulls=!0:e.RealChartType==QueryViewerChartType.StackedLine?f.line.stacking="normal":e.RealChartType==QueryViewerChartType.StackedLine100&&(f.line.stacking="percent");break;case "spline":f.spline={};f.spline.marker=g(e);break;case "pie":f.pie={};if(e.RealChartType==QueryViewerChartType.Doughnut||e.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.innerSize="35%";if(e.RealChartType==QueryViewerChartType.Pie3D||e.RealChartType==QueryViewerChartType.Doughnut3D)f.pie.depth=35;f.pie.dataLabels=
{enabled:h,connectorColor:"#c3c4c8",connectorShape:d};f.pie.showInLegend=!0;break;case "solidgauge":f.solidgauge={};f.solidgauge.showInLegend=!0;f.solidgauge.rounded=!0;break;case "funnel":f.funnel={};f.funnel.showInLegend=!0;f.funnel.dataLabels={enabled:h,connectorColor:"#c3c4c8",connectorShape:d};break;case "pyramid":f.pyramid={},f.pyramid.showInLegend=!0,f.pyramid.dataLabels={enabled:h,connectorColor:"#c3c4c8",connectorShape:d}}return f}(z.chart.type,f);z.tooltip=function(b){var c={};a(b)?(c.borderRadius=
1,c.shadow=!0,c.shared=1<b.Metadata.Data.length,c.formatter=function(){return 1===b.Metadata.Data.length?B(this,b.Chart.Series.ByIndex,k(b)):v(this,b.Chart.Series.ByIndex)}):b.RealChartType==QueryViewerChartType.StackedColumn100||b.RealChartType==QueryViewerChartType.StackedBar100||b.RealChartType==QueryViewerChartType.StackedArea100||b.RealChartType==QueryViewerChartType.StackedLine100?c.formatter=function(){var a=Math.round(100*this.point.percentage)/100;return qv.util.isRTL(b)?"%"+a+"<b>: "+(""!=
this.point.id?this.point.id:this.series.name)+"</b>":"<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+a+"%"}:d(b)?c.formatter=function(){var a;var c=k(b);a=qv.collection[this.point.series.chart.options.qv.viewerId];if(c){var c=n(a,this.point.index),f=0<c.length?c[0].id:"",g=""!=f,d="";g&&(qv.util.isRTL(a)?d+=m(f):d+=e(f));for(f=0;f<c.length;f++){var h=c[f],l=Math.round(100*h.percentage)/100;qv.util.isRTL(a)?(d+=(g||0<f?"<br/>":"")+"%"+l,d+=" :"+h.series.name):(d+=(g||0<f?"<br/>":
"")+h.series.name+": ",d+=l+"%")}a=d}else{var l=Math.round(100*this.point.percentage)/100;a=qv.util.isRTL(a)?"%"+l+"<b>: "+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>":"<b>"+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+l+"%"}return a}:b.RealChartType==QueryViewerChartType.CircularGauge?(c.enabled=(1<b.Chart.Series.DataFields.length||!gx.lang.gxBoolean(b.ShowValues))&&!k(b),c.formatter=function(){return y(this,b)},c.positioner=function(a){return{x:(this.chart.plotWidth-
a)/2,y:this.chart.plotHeight/2}}):c.formatter=function(){return B(this,b.Chart.Series.ByIndex,k(b)&&!o(b))};c.useHTML=qv.util.isRTL(b);return c}(f);z.series=function(e,b,f){function g(e,b,f,d,h){d={};e.ItemClick&&e.Metadata.Data[f].RaiseItemClick&&(d.className="highcharts-drilldown-point");d.visible=b.Visible==QueryViewerVisible.Yes||b.Visible==QueryViewerVisible.Always;d.events={legendItemClick:function(a){if(b.Visible==QueryViewerVisible.Always)a.preventDefault();else{var c=qv.chart.GetRuntimeMetadata(e),
a=qv.util.GetElementInCollection(c,"Name",e.Chart.Series.ByIndex[a.target.index].FieldName);a.Hidden=!a.Hidden;qv.util.autorefresh.UpdateLayoutSameGroup(e,c,false)}}};if(a(e)){d.name=b.Name;d.data=[];d.turboThreshold=0;qv.util.IsNullColor(b.Color)||F(e,d,b.Color,!0);var m=G(e.Chart.Categories,b.Points,qv.util.XAxisDataType(e),b.Aggregation,h);for(j=0;j<m.length;j++){var f=m[j].name,l=m[j].x,h=m[j].y,l=new gx.date.gxdate(l,"Y4MD");d.data[j]={x:l.Value.getTime()-6E4*l.Value.getTimezoneOffset(),y:h,
name:f};qv.util.IsNullColor(b.Color)&&F(e,d.data[j],b.Points[j].Color,!0)}}else{e.RealChartType==QueryViewerChartType.CircularGauge&&(m=k(e)?I(1,1):I(e.Chart.Series.DataFields.length,f+1));d.name=b.Name;d.data=[];d.turboThreshold=0;qv.util.IsNullColor(b.Color)||F(e,d,b.Color,!0);if(e.RealChartType==QueryViewerChartType.Radar||e.RealChartType==QueryViewerChartType.FilledRadar||e.RealChartType==QueryViewerChartType.PolarArea)d.pointPlacement=e.RealChartType==QueryViewerChartType.Radar||e.RealChartType==
QueryViewerChartType.FilledRadar?"on":null;for(j=0;j<b.Points.length;j++)(h=null!=b.Points[j].Value?parseFloat(qv.util.trim(b.Points[j].Value).replace(",",".")):null,o(e)&&(h=100*(h/b.TargetValue)),f=e.Chart.Categories.Values[j].ValueWithPicture,d.data[j]={},d.data[j].y=h,d.data[j].name=o(e)?"":f,d.data[j].id=d.data[j].name,c(e)&&(l=e.Chart.Categories.Values[j].Value,l=new gx.date.gxdate(l,"Y4MD"),d.data[j].x=l.Value.getTime()-6E4*l.Value.getTimezoneOffset(),d.data[j].id=l),e.RealChartType==QueryViewerChartType.CircularGauge&&
(d.data[j].radius=m.UpperExtreme.toString()+"%",d.data[j].innerRadius=m.LowerExtreme.toString()+"%"),e.RealChartType==QueryViewerChartType.CircularGauge)?(f=qv.util.IsNullColor(b.Color)?b.Points[0].Color:b.Color,F(e,d.data[j],f,!0)):qv.util.IsNullColor(b.Color)&&F(e,d.data[j],b.Points[j].Color,!0)}return d}for(var d=[],h=0;h<e.Chart.Series.ByIndex.length;h++)if(!k(e)||h==b){var m=g(e,e.Chart.Series.ByIndex[h],h,d,f),l=null!=b?b:h;r(e)&&(0==l%2?(m.type="column",m.yAxis=0):(m.type="line",m.yAxis=k(e)?
0:1));d.push(m)}return d}(f,u,w);return z}function E(a){var e="";if(""==a.YAxisTitle){if(1==a.Chart.Series.DataFields.length){var b;a:for(e=0;e<a.Metadata.Data.length;e++)if(a.Metadata.Data[e].DataField==a.Chart.Series.DataFields[0]){b=a.Metadata.Data[e];break a}e=qv.util.getTranslation(b.Title)}}else e=qv.util.getTranslationAlsoIfStatic(a.YAxisTitle);return e}function D(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(T+"_Zoom_"+a+"m"):gx.dom.el(a)}function u(a,e){if(zoom=D(a))zoom.style.textDecoration=
e}function t(a){if(zoom=D(a))zoom.onclick();else if(0!=a){var e;switch(a){case 12:e=6;break;case 6:e=3;break;case 3:e=2;break;case 2:e=1;break;case 1:e=0}t(e)}}function w(a,e){gx.dom.el(a+"_options_compare_enable").disabled=!e;gx.dom.el(a+"_options_compare_text").disabled=!e;gx.dom.el(a+"_options_compare_text").style.opacity=!e?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!e;gx.dom.el(a+"_options_compare_options").style.opacity=!e?0.5:1}function K(a){return a+"_options"}function V(a){return a+
"_center"}function S(a){return a+"_footer_slider"}function ba(a){return a+"_footer_chart"}function N(a){return a+"_footer_range"}function L(a){return a+"_footer_left_cursor"}function H(a){return a+"_footer_right_cursor"}function W(a){return a+"_footer_center"}function da(a,e,b){var c=Math.max(e,0),e=Math.min(c,100),c=Math.max(b,0),b=Math.min(c,100);jQuery("#"+(a+"_footer")).css("width","100%").css("height",Q.toString()+"px");jQuery("#"+ba(a)).css("width","100%").css("height",(Q-2).toString()+"px");
c=qv.collection[a].getContainerControl().offsetWidth;e=e*c/100;b=(100-b)*c/100;if(c-e-b<2*R){var f=2*R-(c-e-b),d;d=0==f%2?f/2:(f+1)/2;e-=d;b-=f-d;0>e&&(b+=e,e=0);0>b&&(e+=b,b=0)}jQuery("#"+S(a)).css("width","100%").css("height",Q.toString()+"px").css("padding-left",(100*e/c).toString()+"%").css("padding-right",(100*b/c).toString()+"%");jQuery("#"+N(a)).css("width","100%").css("height",Q.toString()+"px");jQuery("#"+L(a)).css("width",R.toString()+"px").css("height",Q.toString()+"px");jQuery("#"+H(a)).css("width",
R.toString()+"px").css("height",Q.toString()+"px");jQuery("#"+W(a)).css("width","calc(100% - "+2*R+"px)").css("height",Q.toString()+"px").css("left",R.toString()+"px")}function ha(a,e){var b=parseInt(jQuery("#"+S(a)).css("padding-left")),c=parseInt(jQuery("#"+N(a)).css("width")),f;f=e.originalEvent.touches?e.originalEvent.touches[0].pageX-e.originalEvent.touches[0].target.offsetLeft:e.offsetX;switch(e.target.id){case S(a):return f;case L(a):return f+b;case W(a):return f+b;case H(a):return f+b+c-R}}
function ja(e){function b(a){a.preventDefault();M=e;var c=jQuery("#"+S(M)),f=jQuery("#"+N(M));parseInt(c.css("padding-left"));ia=ha(M,a);Z=parseInt(c.css("padding-left"));ea=parseInt(c.css("padding-right"));aa=parseInt(c.css("width"));fa=parseInt(f.css("width"))}function c(){if(X||O||P){var e=jQuery("#"+S(M)),b=qv.collection[M],f=gx.dom.el(M+"_options_compare_enable").checked,d=b.getContainerControl().offsetWidth,g;g=a(b)?V(b.userControlId()):b.getContainerControl().id;var b=k(b)?jQuery("[id^="+g+
"_chart]"):jQuery("#"+g),h=[];jQuery.each(b,function(a,e){var b=jQuery("#"+e.id).highcharts();h.push(b)});b=h[0];g=parseInt(e.css("padding-left"));var m=parseInt(e.css("padding-right")),e=100*g/d,d=100*(1-m/d);if(0==e&&100==d)jQuery.each(h,function(a,e){e.zoomOut()});else{b.get("xaxis").getExtremes();var b=b.options.qv,l=b.dataMin+e/100*(b.dataMax-b.dataMin),A=b.dataMin+d/100*(b.dataMax-b.dataMin),s=f?!1:!0;jQuery.each(h,function(a,e){e.get("xaxis").setExtremes(l,A,s)})}f&&Y(h);if(O||P)u(U,"none"),
U=null}O=P=X=!1}function f(a){if(X||O||P)if(a=ha(M,a)-ia,a=P?Math.min(a,fa-2*R):Math.min(a,ea),a=O?Math.max(a,-fa+2*R):Math.max(a,-Z),0!=a){jQuery("#"+W(M));var e=jQuery("#"+S(M));jQuery("#"+N(M));P?e.css("padding-left",(100*(Z+a)/aa).toString()+"%"):(O||e.css("padding-left",(100*(Z+a)/aa).toString()+"%"),e.css("padding-right",(100*(ea-a)/aa).toString()+"%"))}}var d=jQuery("#"+L(e)),g=jQuery("#"+H(e)),h=jQuery("#"+W(e)),m=jQuery("#"+S(e));jQuery("#"+N(e));d.mousedown(function(a){a.preventDefault();
P=!0});g.mousedown(function(a){a.preventDefault();O=!0});h.mousedown(function(a){a.preventDefault();!P&&!O&&(X=!0)});m.mousedown(function(a){b(a)});jQuery(document).mouseup(function(a){c(a)});m.mousemove(function(a){f(a)});d.on("touchstart",function(a){a.preventDefault();P=!0});g.on("touchstart",function(a){a.preventDefault();O=!0});h.on("touchstart",function(a){a.preventDefault();!P&&!O&&(X=!0)});m.on("touchstart",function(a){b(a)});jQuery(document).on("touchend",function(a){c(a)});jQuery(document).on("touchcancel",
function(a){c(a)});m.on("touchmove",function(a){f(a)})}function ka(a,e){var b=qv.util.dom.createDiv(a,S(e),"gx-qv-footer-slider","",{},""),b=qv.util.dom.createDiv(b,N(e),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(b,L(e),"gx-qv-footer-left-cursor","",{},"");qv.util.dom.createDiv(b,H(e),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(b,W(e),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,ba(e),"gx-qv-footer-chart","",{},"")}function la(a,e){var b=ba(a.userControlId()),
c=a.RealChartType==QueryViewerChartType.SmoothTimeline?"spline":"line",f=a.RealChartType==QueryViewerChartType.StepTimeline?"left":"",d=[];if(k(a))for(g=0;g<e.length;g++)d.push(e[g].series[0]);else for(var g=0;g<e[0].series.length;g++)d.push(e[0].series[g]);return qv.chart.getSparklineChartOptions(a,b,c,!1,f,d)}function Y(a){var e=a[0],b=e.options.qv.viewerId,c=qv.collection[b],f=gx.dom.el(b+"_options_compare_enable").checked,d=e.get("xaxis").getExtremes();void 0!=d.userMin&&(d.min=d.userMin);void 0!=
d.userMax&&(d.max=d.userMax);if(f){var g=gx.dom.el(b+"_options_compare_options").children,h;for(ind=0;void 0!=g[ind]&&void 0==h;ind++)g[ind].selected&&(h=g[ind].value);var m,l;"PrevPeriod"==h?(l=new Date(d.min),m=new Date(d.min-(d.max-d.min))):"PrevYear"==h&&(m=new Date(d.min),m=new Date(m.setFullYear(m.getFullYear()-1)),l=new Date(d.max),l=new Date(l.setFullYear(l.getFullYear()-1)));m=m.getTime();l=l.getTime();if(zoom=D(b+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=D(b+"_Zoom_0m"))zoom.style.display=
"";jQuery.each(a,function(a,e){for(var b=[];e.series.length>0;){e.options.qv.colorIndexesUsed||b.push(e.series[0].colorIndex);e.series[0].remove(true)}if(!e.options.qv.colorIndexesUsed)e.options.qv.colorIndexesUsed=b});for(var A=g=0;A<c.Chart.Series.ByIndex.length;A++){var s=c.Chart.Series.ByIndex[A];seriesName=s.Name;var v,y;k(c)?(v=a[g],y=v.options.qv.colorIndexesUsed[0]):(v=e,y=v.options.qv.colorIndexesUsed[g]);var t={turboThreshold:0};t.colorIndex=y;t.id=seriesName+"1";t.name=seriesName;t.data=
[];if(f){var z={className:"highcharts-dashed-series-line",turboThreshold:0};z.colorIndex=y;z.id=seriesName+"2";z.name=seriesName;z.data=[]}y=document.getElementById(b+"_options_group_options").value;s=G(c.Chart.Categories,s.Points,qv.util.XAxisDataType(c),s.Aggregation,y);for(i=0;i<s.length;i++){y=s[i].y;var u=new gx.date.gxdate(s[i].x,"Y4MD"),p=s[i].name,w=u.Value.getTime()-6E4*u.Value.getTimezoneOffset(),u=u.Value.getTime()-6E4*u.Value.getTimezoneOffset();if(f){var B=!1,o=!1;w<=d.max&&w>=d.min&&
(B=!0);if(w<=l&&w>=m){var o=!0,q=new Date(w),n;"PrevPeriod"==h?n="1m"==v.options.qv.predef_zoom?q.setMonth(q.getMonth()+1):"2m"==v.options.qv.predef_zoom?q.setMonth(q.getMonth()+2):"3m"==v.options.qv.predef_zoom?q.setMonth(q.getMonth()+3):"6m"==v.options.qv.predef_zoom?q.setMonth(q.getMonth()+6):"12m"==v.options.qv.predef_zoom?q.setFullYear(q.getFullYear()+1):n+(d.max-d.min):"PrevYear"==h&&(n=q.setFullYear(q.getFullYear()+1))}B&&(B={},B.x=w,B.y=y,B.name=p,t.data.push(B));o&&(B={},B.x=n,B.y=y,B.name=
p,B.real_x=u,z.data.push(B))}else t.data.push({x:w,y:y,name:p})}v.addSeries(t);f&&v.addSeries(z);g++}}function ma(a,e){if(a.length<e)return 0;var b=(a[a.length-1].x-a[a.length-e].x)/1E3/3600/24/(365/12);return 1>=b?1:2>=b?2:3>=b?3:6>=b?6:12}function na(a,e){function b(a,e,c,d,f,g,h,m,l){var k=e.userControlId(),a=qv.util.dom.createSelect(a,K(k)+"_group_options");qv.util.XAxisDataType(e)==QueryViewerDataType.DateTime&&(qv.util.dom.createOption(a,"Seconds","Seconds"==e._groupOption,gx.getMessage("GXPL_QViewerSeconds")),
l&&(qv.util.dom.createOption(a,"Minutes","Minutes"==e._groupOption,gx.getMessage("GXPL_QViewerMinutes")),m&&qv.util.dom.createOption(a,"Hours","Hours"==e._groupOption,gx.getMessage("GXPL_QViewerHours"))));if(o||qv.util.XAxisDataType(e)==QueryViewerDataType.Date)qv.util.dom.createOption(a,"Days","Days"==e._groupOption,gx.getMessage("GXPL_QViewerDays")),h&&(qv.util.dom.createOption(a,"Weeks","Weeks"==e._groupOption,gx.getMessage("GXPL_QViewerWeeks")),g&&(qv.util.dom.createOption(a,"Months","Months"==
e._groupOption,gx.getMessage("GXPL_QViewerMonths")),f&&(qv.util.dom.createOption(a,"Quarters","Quarters"==e._groupOption,gx.getMessage("GXPL_QViewerQuarters")),d&&(qv.util.dom.createOption(a,"Semesters","Semesters"==e._groupOption,gx.getMessage("GXPL_QViewerSemesters")),c&&qv.util.dom.createOption(a,"Years","Years"==e._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var c=a[0];T=c.options.qv.viewerId;var d=qv.collection[T],f=document.getElementById(K(T)),g=document.getElementById(T+"_footer"),
h=c.get("xaxis").getExtremes(),m=h.dataMax-h.dataMin;jQuery.each(a,function(a,e){e.options.qv.dataMax=h.dataMax;e.options.qv.dataMin=h.dataMin});var l=2628288E3<m,k=5255712E3<m,A=7884E6<m,s=15768E6<m,m=31536E6<m;d._groupOption=d._groupOption||(qv.util.XAxisDataType(d)==QueryViewerDataType.Date?"Days":"Seconds");var v=new gx.date.gxdate(""),y=new gx.date.gxdate("");v.Value.setTime(h.dataMin+6E4*v.Value.getTimezoneOffset());y.Value.setTime(h.dataMax+6E4*y.Value.getTimezoneOffset());var z=!0,p=!0,B=
!0,q=!0,G=!0,o=!0,n=!0,r=!0;gx.date.year(v)==gx.date.year(y)&&(z=!1,6>=gx.date.month(v)&&7<=gx.date.month(y)||(p=!1,3>=gx.date.month(v)&&4<=gx.date.month(y)||(6>=gx.date.month(v)&&7<=gx.date.month(y)||9>=gx.date.month(v)&&10<=gx.date.month(y))||(B=!1,gx.date.month(v)==gx.date.month(y)&&(q=!1,gx.date.day(v)-gx.date.dow(v)==gx.date.day(y)-gx.date.dow(y)&&(G=!1,gx.date.day(v)==gx.date.day(y)&&(o=!1,gx.date.hour(v)==gx.date.hour(y)&&(n=!1,gx.date.minute(v)==gx.date.minute(y)&&(r=!1))))))));(function(a,
e,c,d,f,g,h,m,l,k,A,v,s,y){function t(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:ga+"px",flexGrow:1},"")}function z(a,e,b){return qv.util.dom.createAnchor(a,b,{cursor:"pointer",paddingLeft:"6px"},e)}var u=e.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",flexDirection:"row",flexWrap:"wrap"},""),p=t(a),w=t(a),B=t(a),p=qv.util.dom.createDiv(p,"","","",{"float":"left"},"");qv.util.dom.createText(p,gx.getMessage("GXPL_QViewerJSChartZoom"));
if(c){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),u+"_Zoom_1m");if(d){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),u+"_Zoom_2m");if(f){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),u+"_Zoom_3m");if(g){z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),u+"_Zoom_6m");h&&z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),u+"_Zoom_12m")}}}}z(p,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),u+"_Zoom_0m");c=qv.util.dom.createDiv(w,"","",
"",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(c,K(u)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));b(c,e,m,l,k,A,v,s,y);e=qv.util.dom.createDiv(B,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(e,K(u)+"_compare_enable","checkbox",{verticalAlign:"text-bottom"});qv.util.dom.createSpan(e,K(u)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},null,gx.getMessage("GXPL_QViewerCompareWith"));
u=qv.util.dom.createSelect(e,K(u)+"_compare_options");qv.util.dom.createOption(u,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(u,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));return a})(f,d,l,k,A,s,m,z,p,B,q,G,n,r);ka(g,T);ja(T);gx.dom.el(f.id+"_compare_enable").onclick=function(){Y(a)};gx.dom.el(f.id+"_compare_options").onchange=function(){gx.dom.el(f.id+"_compare_enable").checked&&Y(a)};gx.dom.el(f.id+"_group_options").onchange=function(){Y(a)};
var g=function(e){var b=gx.dom.el(f.id+"_compare_enable").checked;if(e>0){var d,g;g=c.get("xaxis").getExtremes().dataMax;d=g-e*2628028800;var h=b?false:true;jQuery.each(a,function(a,e){e.get("xaxis").setExtremes(d,g,h)});var m=c.options.qv;da(c.options.qv.viewerId,(d-m.dataMin)/(m.dataMax-m.dataMin)*100,(g-m.dataMin)/(m.dataMax-m.dataMin)*100);w(c.options.qv.viewerId,true)}else{jQuery.each(a,function(a,e){e.zoomOut()});w(c.options.qv.viewerId,false)}u(U,"none");u(this.id,"underline");jQuery.each(a,
function(a,b){b.options.qv.predef_zoom=e+"m"});U=this.id;b&&Y(a)},l=[0,1,2,3,6,12],E;for(E in l)if(k=l[E],A=gx.dom.el(T+"_Zoom_"+k+"m"))A.onclick=g.closure(A,[k]);E=ma(c.series[0].points,20);t(E);d=la(d,e);new Highcharts.Chart(d)}function oa(e){var b=qv.collection[e.options.qv.viewerId];if(!c(b)){var d=b.SelectionAllowed(),g=!1;if(b.ItemClick)for(var h=0;h<b.Metadata.Axes.length;h++)if(b.Metadata.Axes[h].RaiseItemClick){g=!0;break}(g||d)&&jQuery.each(e.xAxis[0].ticks,function(b,c){c&&c.label&&(g&&
c.label.addClass("gx-qv-clickable-element"),c.label.on("click",function(){var h=g,m=qv.collection[e.options.qv.viewerId],l=!1;d&&!a(m)&&(l=f(m.Charts,c.pos));h&&(h=1==m.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(m,m.Chart.Categories.DataFields[0]).Name:"",q(m.ItemClickData,m,h,QueryViewerElementType.Axis,c.label.textStr,l,m.Data.Rows[b]),m.ItemClick())}))})}}var U=null,T=null,ga=35,Q=50,R=10,ia=0,M="",Z=0,ea=0,fa=0,aa=0,P=!1,O=!1,X=!1;return{tryToRenderChart:function(e){var b="";
(new Date).getTime();e.xml=e.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(e,function(e,c){var d=!1;e!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=e,d=!0);qv.util.anyError(e)?(b=qv.util.getErrorFromText(e),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(e,c){var d=false;if(e!=c.xml.metadata){c.xml.metadata=e;d=true}(new Date).getTime();if(qv.util.anyError(e)){b=qv.util.getErrorFromText(e);qv.util.renderError(c,b)}else{d&&qv.services.parseMetadataXML(c);
c.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(c,function(e,c){var d=false;if(e!=c.xml.data){c.xml.data=e;d=true}(new Date).getTime();if(qv.util.anyError(e)){b=qv.util.getErrorFromText(e);qv.util.renderError(c,b)}else{d&&qv.services.parseDataXML(c);d=qv.util.GetContainerControlClasses(c);d!=""&&qv.util.SetUserControlClass(c,d);d=qv.util.ProcessDataAndMetadata(c);if(d==""){var f=c.userControlId(),d=qv.util.dom.getEmptyContainer(c);if((a(c)||k(c))&&d.offsetHeight==0)d.style.height="400px";
if(a(c)){qv.util.dom.createDiv(d,K(f),"QVTimelineHeaderContainer","",{width:"100%",height:ga+"px"},"");var g=qv.util.dom.createDiv(d,V(f),"","",{width:"100%",height:"calc(100% - "+ga+"px - "+Q+"px)"},"");qv.util.dom.createDiv(d,f+"_footer","gx-qv-footer","",{width:"100%",height:Q+"px"},"");d.style.padding=DEFAULTCHARTSPACING+"px";d=g}if(k(c))for(var g=c.Chart.Series.DataFields.length,h=parseInt(100/g),m=100%g,f=a(c)?V(f):f,l=0;l<g;l++)qv.util.dom.createDiv(d,f+"_chart"+l.toString(),"","",{width:"100%",
height:(h+(l<m?1:0)).toString()+"%"},"");d=[];if(k(c))for(g=0;g<c.Chart.Series.ByIndex.length;g++){h=J(c,c.Chart.Series.ByIndex[g],g);d.push(h)}else{h=J(c,null,null);d.push(h)}if(c.RealChartType==QueryViewerChartType.CircularGauge){g=qv.util.GetThemeStyleSheet(c);g.insertRule("#"+c.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",g.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),
gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),
gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,
3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,3),gx.getMessage("GXPL_QViewerDecember").substring(0,3)],numericSymbols:null}});g=[];for(h=0;h<d.length;h++){HCChart=new Highcharts.Chart(d[h],oa);g.push(HCChart)}c.Charts=g;a(c)&&na(g,d);c._ControlRenderedTo=c.RealType;qv.util.hideActivityIndicator(c)}else qv.util.renderError(c,d)}}):qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},
GetMetadataChart:function(a){var e=qv.util.GetDesigntimeMetadata(a);(function(a,e){function b(a,e,c){for(var d=0;d<a.length;d++){var f=a[d];if(f.Name==e){f.Visible=c?QueryViewerVisible.Yes:QueryViewerVisible.No;break}}}if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(var c=0;c<a.Charts[0].series.length;c++){var d=a.Charts[0].series[c],f=a.Chart.Series.ByIndex[c].FieldName;b(e,f,d.visible)}else for(c=0;c<a.Charts.length;c++)d=a.Charts[c].series[0],f=a.Chart.Series.ByIndex[c].FieldName,b(e,
f,d.visible)})(a,e);return e},GetRuntimeMetadata:function(a){for(var e=[],b,c=b=0;c<a.Metadata.Axes.length;c++){var d=a.Metadata.Axes[c];d.Visible!=QueryViewerVisible.Never&&(b+=1);e.push({Name:d.Name,Type:QueryViewerElementType.Axis,Axis:d.Axis,Position:d.Visible!=QueryViewerVisible.Never?b:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No})}for(c=b=0;c<a.Metadata.Data.length;c++)d=a.Metadata.Data[c],d.Visible!=QueryViewerVisible.Never&&(b+=1),e.push({Name:d.Name,
Type:QueryViewerElementType.Datum,Axis:"",Position:d.Visible!=QueryViewerVisible.Never?b:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No});if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(b=0;b<a.Charts[0].series.length;b++)c=a.Charts[0].series[b],d=a.Chart.Series.ByIndex[b].FieldName,d=qv.util.GetElementInCollection(e,"Name",d),d.Hidden=!c.visible;else for(b=0;b<a.Charts.length;b++)c=a.Charts[b].series[0],d=a.Chart.Series.ByIndex[b].FieldName,d=qv.util.GetElementInCollection(e,
"Name",d),d.Hidden=!c.visible;return e},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,e,b,c,d,f){a={chart:{}};a.chart.renderTo=e;a.chart.margin=0;a.chart.type=b;a.chart.styledMode=!0;c&&(a.chart.className="highcharts-no-background");a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip={};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=
!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover={};a.plotOptions.series.states.hover.lineWidth=1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover={};a.plotOptions.series.marker.states.hover.radius=2;""!=d&&(a.plotOptions.series.step=d);a.series=
[];for(e=0;e<f.length;e++)a.series.push(f[e]);return a},IsDatetimeXAxis:function(a){return c(a)},IsSingleSerieChart:function(a){return d(a)||b(a)},IsAreaChart:function(a){return a.RealChartType==QueryViewerChartType.Area||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.SmoothArea||a.RealChartType==QueryViewerChartType.StepArea},IsLineChart:function(e){return e.RealChartType==QueryViewerChartType.Line||e.RealChartType==
QueryViewerChartType.StackedLine||e.RealChartType==QueryViewerChartType.StackedLine100||e.RealChartType==QueryViewerChartType.SmoothLine||e.RealChartType==QueryViewerChartType.StepLine||e.RealChartType==QueryViewerChartType.Sparkline||a(e)},IsSplittedChart:function(a){return k(a)},IsGaugeChart:function(a){return o(a)},Select:function(a,e){for(var b=[],c=0;c<a.Data.Rows.length;c++){var d=a.Data.Rows[c],f=!0;for(j=0;j<e.length;j++){var g=e[j];if(d[g.DataField]&&qv.util.trim(d[g.DataField])!=qv.util.trim(g.Value)){f=
!1;break}}f&&b.push(c)}if(0<b.length){c=a.Charts;for(d=0;d<c.length;d++)for(var f=c[d],g=!1,h=0;h<b.length;h++)for(var m=b[h],l=0;l<f.series.length;l++)f.series[l].points[m].select(!0,g),g||(g=!0)}else x(a.Charts)},Deselect:function(a){x(a.Charts)}}}();
qv.card=function(){function a(a,b){if(0!=a.ConditionalStyles.length)for(var c=0;c<a.ConditionalStyles.length;c++){var d=a.ConditionalStyles[c];if(qv.util.satisfyStyle(b,d))return qv.util.css.parseStyle(d.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function c(a,b,c,d){function h(a,e){var b=gx.date.now(),c;switch(a){case QueryViewerTrendPeriod.LastYear:c=gx.date.addyr(b,-1);break;case QueryViewerTrendPeriod.LastSemester:c=gx.date.addmth(b,-6);break;case QueryViewerTrendPeriod.LastQuarter:c=
gx.date.addmth(b,-3);break;case QueryViewerTrendPeriod.LastMonth:c=gx.date.addmth(b,-1);break;case QueryViewerTrendPeriod.LastWeek:c=gx.date.dtadd(b,-604800);break;case QueryViewerTrendPeriod.LastDay:c=gx.date.dtadd(b,-86400);break;case QueryViewerTrendPeriod.LastHour:c=gx.date.dtadd(b,-3600);break;case QueryViewerTrendPeriod.LastMinute:c=gx.date.dtadd(b,-60);break;case QueryViewerTrendPeriod.LastSecond:c=gx.date.dtadd(b,-1)}return qv.util.dateToString(c,e==QueryViewerDataType.DateTime)}var k={};
if(a.IncludeTrend)if(a.TrendPeriod==QueryViewerTrendPeriod.SinceTheBeginning||""==a.TrendPeriod)k=0;else for(var e=h(a.TrendPeriod,d),k=a.Data.Rows.length-1,m=a.Data.Rows.length-2;0<=m&&!(a.Data.Rows[m][c]<e);m--)k=m;else k=a.Data.Rows.length-1;return k=function(a,e,b,c,d,f){var g=null,h=null,m=null,l=null,k=[],q={AnyTrend:!1};if(""!=b){for(var o=d.length-1,u=0,t=0,w=0,n=0,r=0,x=0,C=null,N=null;a<=o;a++)if(void 0!=d[a][b]&&void 0!=d[a][c]){var u=u+1,L=new gx.date.gxdate(d[a][b],"Y4MD"),H=parseFloat(d[a][c]);
k.push({x:L.Value.getTime()-6E4*L.Value.getTimezoneOffset(),y:H});if(null==g&&null==h)h=g=H,m=d[a][b],l=d[a][b];else if(H>h&&(l=d[a][b],h=H),H<g)m=d[a][b],g=H;a>=e&&(null==C&&null==N&&(C=L,N=H),L=f==QueryViewerDataType.Date?gx.date.daysDiff(L,C):gx.date.secDiff(L,C),H-=N,t+=L,w+=H,n+=L*H,r+=L*L,x+=H*H)}q.AnyTrend=1<u;q.Slope=(u*n-t*w)/(u*r-t*t);q.Intercept=(w-q.Slope*t)/u;q.R2=Math.pow((u*n-t*w)/Math.sqrt((u*r-t*t)*(u*x-w*w)),2)}e={};e.LinearRegression=q;e.MinValue=g;e.MinWhen=m;e.MaxValue=h;e.MaxWhen=
l;e.ChartSeriesData=k;return e}(a.IncludeSparkline||a.IncludeMaxAndMin?0:k,k,c,b.DataField,a.Data.Rows,d)}function d(a,b,c,d){function h(a,e){function b(a,e,c){var d=[];if(c)for(c=0;c<e.length;c++)d.push(e[c][a]);else d.push(e[e.length-1][a]);return d}for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var f=a.Metadata.Axes[d];if(!f.IsComponent){var g={};g.Name=f.Name;g.Values=b(f.DataField,a.Data.Rows,e);c.push(g)}}for(d=0;d<a.Metadata.Data.length;d++)f=a.Metadata.Data[d],f.IsComponent||(g={},g.Name=
f.Name,g.Values=b(f.DataField,a.Data.Rows,e),c.push(g));return c}for(var k=null,e=0;e<b.Metadata.Data.length;e++)if(b.Metadata.Data[e].Name==c){k=b.Metadata.Data[e];break}null!=k&&(a.Name=k.Name,a.Type=QueryViewerElementType.Datum,a.Axis="",c=d?qv.util.aggregateData(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1],a.Value=c[k.DataField],a.Context=h(b,d))}function b(a,b){return a+"_card_sparkline_"+b}function h(a,c,d){d=b(a.userControlId(),d);return qv.chart.getSparklineChartOptions(a,
d,"line",!0,"",[{data:c}])}function r(a,b,c,d){var h={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),k;k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",h,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-value",c,{},null,b);k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",h,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-title",c,{},null,d);return a}function o(a){var a=new gx.date.gxdate(a,
"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function k(a,b,c,d){""!=b?(d=qv.util.formatNumber(parseFloat(b),d,c.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/c.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=d="";switch(a.ShowDataAs){case QueryViewerShowDataAs.Values:return d;case QueryViewerShowDataAs.Percentages:return b;case QueryViewerShowDataAs.ValuesAndPercentages:return d+" ("+b+")";default:return d}}
function n(d){function g(a,e,b){var b=0<b.LinearRegression.Slope?"keyboard_arrow_up":0>b.LinearRegression.Slope?"keyboard_arrow_down":"drag_handle",c;c=""==e.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+e.TrendPeriod+"Trend");var d={width:"0px",marginLeft:"5px"};e.IncludeSparkline||(d.position="relative",d.top="2px");d.fontSize="36px";return b=qv.util.dom.createIcon(a,c,d,b)}for(var n=0<d.Data.Rows.length,f=!0,x="",C,e=0;e<d.Metadata.Axes.length;e++){var m=
d.Metadata.Axes[e];if(m.DataType==QueryViewerDataType.Date||m.DataType==QueryViewerDataType.DateTime){f=!1;x=m.DataField;C=m.DataType;break}}var y;n&&(y=f?qv.util.aggregateData(d.Metadata.Data,d.Data.Rows):d.Data.Rows[d.Data.Rows.length-1]);var B=qv.util.dom.getEmptyContainer(d);m=d.IsAutoResize()?e="":e="100%";var e=qv.util.dom.createTable(B,qv.util.GetContainerControlClasses(d),{width:e,height:m}),e=qv.util.dom.createRow(e),B=qv.util.dom.createCell(e,1,"center",{},""),e=d.Orientation==QueryViewerOrientation.Horizontal?
"100%":"",m=d.Orientation==QueryViewerOrientation.Vertical?"100%":"",B=qv.util.dom.createTable(B,"",{width:e,height:m,whiteSpace:"nowrap"}),v;d.Orientation==QueryViewerOrientation.Horizontal&&(v=qv.util.dom.createRow(B));m=[];for(e=0;e<d.Metadata.Data.length;e++){var s=d.Metadata.Data[e];if(s.Visible==QueryViewerVisible.Yes||s.Visible==QueryViewerVisible.Always){var G=qv.util.ParseNumericPicture(s.DataType,s.Picture).DecimalPrecision,p,I,A;n?(p=y[s.DataField],I=k(d,y[s.DataField],s,G),A=o(y[x])):
A=I=p="";if((gx.lang.gxBoolean(d.IncludeTrend)||gx.lang.gxBoolean(d.IncludeSparkline)||gx.lang.gxBoolean(d.IncludeMaxAndMin))&&n){var z=c(d,s,x,C);m.push(z)}var F=a(s,p);p={};var J="qv-card-element-value";qv.util.startsWith(F,"{")&&qv.util.endsWith(F,"}")?p=JSON.parse(F):J=F;F=null;d.ItemClick&&s.RaiseItemClick&&(J+=(""==J?"":" ")+"gx-qv-clickable-element",F=function(){qv.card.fireItemClickEvent(event,d,f)});d.Orientation==QueryViewerOrientation.Vertical&&(v=qv.util.dom.createRow(B));var E=d.Orientation==
QueryViewerOrientation.Horizontal?"10px":"",D=d.Orientation==QueryViewerOrientation.Vertical?"10px":"",E=qv.util.dom.createCell(v,1,"center",{paddingRight:E,paddingLeft:E,paddingBottom:D,paddingTop:D},""),E=qv.util.dom.createTable(E,"",{}),D=qv.util.dom.createRow(E),D=qv.util.dom.createCell(D,1,"center",{},""),D=qv.util.dom.createTable(D,"",{}),D=qv.util.dom.createRow(D),u=qv.util.dom.createCell(D,1,"center",{},"");qv.util.dom.createSpan(u,d.getContainerControl().id+"_"+s.Name,J,""!=x?A:"",p,F,I);
var u=qv.util.dom.createCell(D,1,"",{},"");n&&(d.IncludeTrend&&!d.IncludeSparkline&&z.LinearRegression.AnyTrend)&&g(u,d,z);D=qv.util.dom.createRow(E);D=qv.util.dom.createCell(D,1,"center",{},"");span1=qv.util.dom.createSpan(D,"","qv-card-element-title",""!=x?A:"",{},null,s.Title);d.IncludeSparkline&&(""!=x&&n)&&(D=qv.util.dom.createRow(E),D=qv.util.dom.createCell(D,1,"",{},""),D=qv.util.dom.createTable(D,"",{width:"100%"}),D=qv.util.dom.createRow(D),u=qv.util.dom.createCell(D,1,"",{width:"100%"},
""),qv.util.dom.createDiv(u,b(d.userControlId(),e),"","",{height:"50px",width:"100%",minWidth:"100px"},""),u=qv.util.dom.createCell(D,1,"",{width:"0%"},""),n&&(d.IncludeTrend&&z.LinearRegression.AnyTrend)&&g(u,d,z));d.IncludeMaxAndMin&&(""!=x&&n)&&(D=qv.util.dom.createRow(E),D=qv.util.dom.createCell(D,1,"center",{},""),D=qv.util.dom.createTable(D,"",{"margin-top":"10px"}),D=qv.util.dom.createRow(D),u=qv.util.dom.createCell(D,1,"",{},""),r(u,k(d,z.MinValue,s,G),o(z.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),
u=qv.util.dom.createCell(D,1,"",{},""),r(u,k(d,z.MaxValue,s,G),o(z.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}}if(d.IncludeSparkline&&""!=x&&n)for(e=0;e<d.Metadata.Data.length;e++)n=h(d,m[e].ChartSeriesData,e),new Highcharts.Chart(n);d._ControlRenderedTo=d.RealType;qv.util.hideActivityIndicator(d)}return{tryToRenderCard:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=
a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,e){var c=false;if(a!=e.xml.metadata){e.xml.metadata=a;c=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(e,b)}else{c&&qv.services.parseMetadataXML(e);e.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(e,function(a,e){var c=false;if(a!=e.xml.data){e.xml.data=a;c=true}(new Date).getTime();
if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(e,b)}else{c&&qv.services.parseDataXML(e);n(e)}}):qv.util.renderError(e,e.Metadata.ParserResult.Message)}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,b,c){a=a.target.id;a=a.substr(a.lastIndexOf("_")+1);d(b.ItemClickData,b,a,c);b.ItemClick()}}}();
qv.map=function(){function a(a){if(a.MapType==QueryViewerMapType.Choropleth||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&"F0"!=a.Chart.Series.DataFields[0])return a.Chart.Series.ByIndex[0].Color.Color?"#"+a.Chart.Series.ByIndex[0].Color.Color:"#0F5B78";if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&
"F0"==a.Chart.Series.DataFields[0])return a.Metadata.Axes[0].Style?a.Metadata.Axes[0].Style.substring(6,a.Metadata.Axes[0].Style.length):"#0F5B78"}function c(e){var b=[];if(e.Metadata.Axes[0].DataType==QueryViewerDataType.Character){if(0<e.Chart.Categories.DataFields.length&&0<e.Chart.Series.DataFields.length)for(var c=0;c<e.Chart.Categories.Values.length;c++){var d=e.Chart.Categories.Values[c].Value,g=parseFloat(e.Chart.Series.ByIndex[0].Points[c].Value);e.MapLibrary===QueryViewerMapLibrary.ECharts?
b.push({name:d,value:g}):b.push([axisvalue,g])}}else if(e.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var b=[],h,k=e.Metadata.Axes[0],c=0;c<e.Data.Rows.length;c++){d=e.Data.Rows[c][k.DataField];d=d.substring(7,d.length-1);for(g=0;g<d.length;g++)if(" "==d[g])var l=parseFloat(d.substring(0,g)),n=parseFloat(d.substring(g+1,d.length));d=[l,n];g=parseFloat(e.Chart.Series.ByIndex[0].Points[c].Value);"F0"==e.Chart.Series.DataFields[0]?b.push({coord:[d[0],d[1]],additionalData:e.Data.Rows[c]}):
0==e.Chart.colorAxis.dataClasses.length?b.push({coord:[d[0],d[1]],value:g,itemStyle:{color:a(e)},additionalData:e.Data.Rows[c]}):(h=e.Chart.Series.ByIndex[0].Points[c].Color.Color,f(h)&&(h="#"+h),b.push({coord:[d[0],d[1]],value:g,itemStyle:{color:h},additionalData:e.Data.Rows[c]}))}return b}function d(a,b,c,d,f,g,h,k,l){function A(a,e){var c={};c.Name=a.Name;var d=qv.util.GetPictureProperties(a.DataType,a.Picture);a.DataType!=QueryViewerDataType.GeoPoint?(d=qv.util.ApplyPicture(e,a.Picture,a.DataType,
d),c.Values=[d]):c.Values=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?e[z.DataField]:[e];return c}var z=b.Metadata.Axes[0];a.Name=c;a.Type=d;a.Axis="";a.Value=f;a.Selected=g;a.Context=[];z.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?A(z,b.Data.Rows[l]):b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?A(z,k[l].name):A(z,k[l].Value),
a.Context.push(d));for(c=0;c<b.Metadata.Data.length;c++)d=b.Metadata.Data[c],d.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?A(d,h[l].value):A(d,h[l].Value),a.Context.push(d));a.Filters=[]}function b(a){a.on("mousedown",function(){a.getZr().setCursorStyle("auto")});a.on("mousemove",function(){a.getZr().setCursorStyle("auto")});a.on("mouseup",function(){a.getZr().setCursorStyle("auto")});a.on("mouseover",function(){a.getZr().setCursorStyle("auto")});
a.on("mouseout",function(){a.getZr().setCursorStyle("auto")})}function h(a,b){a.on("mousedown",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mousemove",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseup",
function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseover",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseout",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):
"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")})}function r(a,b){a.on("click",function(g){if(b.MapType==QueryViewerMapType.Choropleth||b.MapType==QueryViewerMapType.Bubble&&"markPoint"===g.componentType){var h=b.Chart.Series.ByIndex[0],l=qv.util.formatNumber(g.value,h.NumberFormat.DecimalPrecision,h.Picture,!1),s=b.Chart.Series.ByIndex[0].Points,n;b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?n=b.Data.Rows:
b.MapType==QueryViewerMapType.Choropleth&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?s=n=k(c(b),a,b):n=b.Chart.Categories.Values;var p;p=a.getOption();if(b.SelectionAllowed())if(b.MapType==QueryViewerMapType.Choropleth)p=p.series[0].selectedMap,p=!0==p[Object.keys(p)[0]]?!0:!1;else{var o;0==b.Chart.colorAxis.dataClasses.length?o=p.series[0].color:(o=b.Chart.Series.ByIndex[0].Points[g.dataIndex].Color.Color,f(o)&&(o="#"+o));p=a.BubbleSelect==g.dataIndex&&p.series[0].markPoint.data[g.dataIndex].itemStyle.color==
o?!0:a.BubbleSelect==g.dataIndex&&p.series[0].markPoint.data[g.dataIndex].itemStyle.color!=o?!1:a.BubbleSelect!=g.dataIndex&&p.series[0].markPoint.data[g.dataIndex].itemStyle.color==o?!0:!1}else p=!1;g.dataIndex>n.length-1&&Number.isNaN(g.value)||(d(b.ItemClickData,b,h.FieldName,QueryViewerElementType.Datum,l,p,s,n,g.dataIndex),b.ItemClick())}})}function o(a,b,c){function d(a,b){for(var e=a[0],c=a[1],g=!1,f=0,h=b.length-1;f<b.length;h=f++){var m=b[f][0],k=b[f][1],l=b[h][0],h=b[h][1];k>c!=h>c&&e<(l-
m)*(c-k)/(h-k)+m&&(g=!1==g?!0:!1)}return g}return function(a,b,e){var c=[];if(b.Region==QueryViewerRegion.Country&&(b.Country==QueryViewerCountry.US||b.Country==QueryViewerCountry.ES||b.Country==QueryViewerCountry.PT||b.Country==QueryViewerCountry.FR||b.Country==QueryViewerCountry.GQ||b.Country==QueryViewerCountry.MU)){for(var g=[[QueryViewerCountry.US,["US-AK","US-HI","US-PR"]],[QueryViewerCountry.ES,["ES-CN","ES-IB"]],[QueryViewerCountry.PT,["PT-20","PT-30"]],[QueryViewerCountry.FR,["FR-GF","FR-RE",
"FR-GP","FR-MQ","FR-YT"]],[QueryViewerCountry.GQ,["GQ-AN","GQ-BS","GQ-BN"]],[QueryViewerCountry.MU,["MU-RO","MU-CC","MU-AG"]]],f,h,m,k,l,n,u,t=0;t<g.length;t++)if(g[t][0]==b.Country){k=g[t];break}for(b=0;b<e._coordSysMgr._coordinateSystems[0].regions.length;b++)for(g=0;g<k[1].length;g++)for(t=0;t<a.length;t++)if(e._coordSysMgr._coordinateSystems[0].regions[b].name==k[1][g]){if(f=d(a[t].coord,e._coordSysMgr._coordinateSystems[0].regions[b].properties.specialArea),!0==f){height=e._coordSysMgr._coordinateSystems[0].regions[b].properties.specialAreaHeight;
h=e._coordSysMgr._coordinateSystems[0].regions[b]._rect.x;f=e._coordSysMgr._coordinateSystems[0].regions[b]._rect.y;m=e._coordSysMgr._coordinateSystems[0].regions[b]._rect.width;void 0!=e._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth&&e._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit?(l=e._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[0],n=e._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[1],u=e._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth,
areaHeight=e._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaHeight,h-=[(l-a[t].coord[0])/u*m],f=f+height-Math.abs((n-a[t].coord[1])/areaHeight*height)):(h=a[t].coord[0]+(h-a[t].coord[0])+m,f=a[t].coord[1]*height/90+f);a[t].coord=[h,f];n=a[t];n.name=null;n.name=e._coordSysMgr._coordinateSystems[0].regions[b].name;c.push(n);break}}else for(f=0;f<e._coordSysMgr._coordinateSystems[0].regions[b].geometries.length;f++)if(d(a[t].coord,e._coordSysMgr._coordinateSystems[0].regions[b].geometries[f].exterior)){n=
a[t];h=!1;for(m=0;m<c.length;m++)c[m].coord===n.coord&&c[m].value===n.value&&(h=!0);h||(n=a[t],n.name=null,n.name=e._coordSysMgr._coordinateSystems[0].regions[b].name,c.push(n))}return c}if(b.Region==QueryViewerRegion.World&&b.MapType!=QueryViewerMapType.Choropleth)return a;for(k=0;k<a.length;k++){g=!1;for(b=0;b<e._coordSysMgr._coordinateSystems[0].regions.length&&!1==g;b++)for(f=0;f<e._coordSysMgr._coordinateSystems[0].regions[b].geometries.length&&!1==g;f++)if(d(a[k].coord,e._coordSysMgr._coordinateSystems[0].regions[b].geometries[f].exterior)){n=
a[k];n.name=null;n.name=e._coordSysMgr._coordinateSystems[0].regions[b].name;c.push(n);g=!0;break}}return c}(a,b,c)}function k(a,b,c){for(var d=[],b=o(a,c,b),a=[],f=0;f<b.length;f++)d.push({name:b[f].name,value:0,additionalData:[b[f].additionalData]});for(b=0;b<d.length;b++){for(var f=d[b],g=!1,h=[],k=0;k<a.length;k++)a[k].name===f.name&&(h=a[k].additionalData,h.push(f.additionalData[0]),a[k].additionalData=h,g=!0);!1==g&&a.push(f)}for(b=0;b<a.length;b++)d=qv.util.aggregateData(c.Metadata.Data,a[b].additionalData,
c),a[b].value=d[c.Metadata.Data[0].DataField];return a}function n(b){var c;if(b.MapType==QueryViewerMapType.Choropleth&&0==b.Chart.colorAxis.dataClasses.length)return c={min:0,maxColor:a(b)};if(b.MapType==QueryViewerMapType.Choropleth&&0!=b.Chart.colorAxis.dataClasses.length||b.MapType==QueryViewerMapType.Bubble&&0!=b.Chart.colorAxis.dataClasses.length)return c=b.Chart.colorAxis;b.MapType==QueryViewerMapType.Bubble&&0==b.Chart.colorAxis.dataClasses.length&&(c=[]);return c}function l(a){var b;if(a.MapType==
QueryViewerMapType.Choropleth)return b={enabled:!0};a.MapType==QueryViewerMapType.Bubble&&(b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1});return b}function g(b){var d;if(b.MapType==QueryViewerMapType.Choropleth)return d=[{name:qv.util.getTranslation(b.Title),type:"map",borderColor:"gray",colorByPoint:!1,data:c(b),joinBy:["name","hc-key"],dataLabels:{enabled:!0,format:"{point.name}"}}];b.MapType==QueryViewerMapType.Bubble&&(d=0==b.Chart.colorAxis.dataClasses.length?b.Chart.Series.ByIndex[0].Color.Color?
[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),styledMode:!1,color:a(b),showInLegend:!0,minSize:4,maxSize:"12%"}]:[{enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),colorIndex:b.Metadata.Data[0].colorIndex,opacity:0.5,showInLegend:!0,minSize:4,maxSize:"12%"}]:[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",
joinBy:["name","hc-key"],data:c(b),styledMode:!1,showInLegend:!0,minSize:4,maxSize:"12%"}]);return d}function q(a){var b;if(a.MapType==QueryViewerMapType.Choropleth)return b={};a.MapType==QueryViewerMapType.Bubble&&(b={});return b}function f(a){var b=/[0-9A-Fa-f]{6}/g,a=b.test(a)?!0:!1;b.lastIndex=0;return a}function x(b,c,d){var g=[],h;if(d.MapType==QueryViewerMapType.Choropleth&&d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var k=0;k<b.length;k++)for(var l=0;l<c._coordSysMgr._coordinateSystems[0].regions.length;l++){if(c._coordSysMgr._coordinateSystems[0].regions[l].name==
b[k].name){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?(h=d.Chart.Series.ByIndex[0].Points[k].Color.Color,f(h)&&(h="#"+h),g.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:h}})):g.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],
value:b[k].value,itemStyle:{color:h}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?g.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):g.push({name:b[k].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:a(d)}});
break}}else for(k=0;k<d.Chart.Categories.Values.length;k++)for(l=0;l<c._coordSysMgr._coordinateSystems[0].regions.length;l++)if(c._coordSysMgr._coordinateSystems[0].regions[l].name==d.Chart.Categories.Values[k].Value){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?(h=d.Chart.Series.ByIndex[0].Points[k].Color.Color,f(h)&&(h="#"+h),g.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:h}})):g.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:h}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[l].properties.center?g.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[l].properties.center[1]],value:b[k].value,itemStyle:{color:a(d)}}):g.push({name:d.Chart.Categories.Values[k].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[l].center[0],c._coordSysMgr._coordinateSystems[0].regions[l].center[1]],value:b[k].value,itemStyle:{color:a(d)}});break}return g}function C(e,d){function g(a,b,c){var e=[],d=function(a){for(var b=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),
c=[],e,d=0;d<a.Chart.colorAxis.dataClasses.length;d++)e=a.Chart.colorAxis.dataClasses[d].Operator,e=e==QueryViewerConditionOperatorSymbol.Interval?qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b)+e+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e==QueryViewerConditionOperatorSymbol.Equal?""+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,
a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e==QueryViewerConditionOperatorSymbol.LessThan||e==QueryViewerConditionOperatorSymbol.LessOrEqual?e+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):e+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[d].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b),c.push(e);return c}(a),f=function(a){for(var b=a.MapType==QueryViewerMapType.Bubble&&
a.Metadata.Axes[0].DataType==QueryViewerDataType.Character?[""]:[],c,e=0;e<a.Chart.colorAxis.dataClasses.length;e++)c=a.Chart.colorAxis.dataClasses[e].color,b.push(c);return b}(a),a=function(a,b,c,e){var d=[];if(a.Metadata.Axes[0].DataType==QueryViewerDataType.Character)b={name:"serie",type:"map",markPoint:{nameProperty:"iso-code",data:b}};else var b=o(b,a,e),g=Math.max.apply(Math,b.map(function(a){return a.value})),e=a.getContainerControl(),f=Math.min(e.offsetWidth,e.offsetHeight),b={name:"serie",
type:"map",markPoint:{data:b,symbolSize:function(a){return void 0==a?8:Math.sqrt(a/g)*f/10}}};d.push(b);for(b=0;b<a.Chart.colorAxis.dataClasses.length;b++)d.push({name:c[b],type:"map",data:[]});return d}(a,b,d,c);e.push(d,f,a);return e}function l(a,b){b.TextStyle.fontFamily&&(a.fontFamily=b.TextStyle.fontFamily);b.TextStyle.fontSize&&(a.fontSize=b.TextStyle.fontSize);b.TextStyle.fontStyle&&(a.fontStyle=b.TextStyle.fontStyle);b.TextStyle.fontWeight&&(a.fontWeight=b.TextStyle.fontWeight);b.TextStyle.color&&
(a.color=b.TextStyle.color);b.BoxStyle.backgroundColor&&(a.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity));b.BoxStyle.borderColor&&(a.borderColor=b.BoxStyle.borderColor);b.BoxStyle.borderWidth&&(a.padding=3,a.borderWidth=b.BoxStyle.borderWidth)}0==e.offsetHeight&&(e.style.height="400px",e.style.overflow="hidden");var n=echarts.init(e),s=function(a){function b(a,c){if(a.fontFamily&&!c.fontFamily)c.fontFamily=a.fontFamily;if(a.fontSize&&!c.fontSize)c.fontSize=
a.fontSize;if(a.fontStyle&&!c.fontStyle)c.fontStyle=a.fontStyle;if(a.fontWeight&&!c.fontWeight)c.fontWeight=a.fontWeight;if(a.color&&!c.color)c.color=a.color}function c(a,b){if(a.fontFamily)b.fontFamily=qv.util.css.resolveVariable(a.fontFamily);if(a.fontSize)b.fontSize=parseFloat(qv.util.css.resolveVariable(a.fontSize));if(a.fontStyle)b.fontStyle=qv.util.css.resolveVariable(a.fontStyle);if(a.fontWeight)b.fontWeight=qv.util.css.resolveVariable(a.fontWeight);if(a.color)b.color=qv.util.css.resolveVariable(a.color)}
function e(a,b){if(a.backgroundColor)b.backgroundColor=qv.util.css.resolveVariable(a.backgroundColor);if(a.opacity)b.opacity=qv.util.css.resolveVariable(a.opacity);if(a.borderWidth)b.borderWidth=parseFloat(qv.util.css.resolveVariable(a.borderWidth));if(a.borderColor)b.borderColor=qv.util.css.resolveVariable(a.borderColor)}function d(a,b,f){f.BackgroundColor=f.BackgroundColor||"white";f.SelectionColor=f.SelectionColor||"lightcoral";f.Opacity=f.Opacity||"1";f.TextStyle=f.TextStyle||{fontFamily:"Source Sans Pro"};
f.Title=f.Title||{TextStyle:{}};f.SeriesLabels=f.SeriesLabels||{TextStyle:{},BoxStyle:{}};f.Legend=f.Legend||{TextStyle:{},BoxStyle:{}};f.Tooltip=f.Tooltip||{TextStyle:{},BoxStyle:{}};for(var g=0;g<a.length;g++){var h=a[g];if(h instanceof CSSStyleRule){var k=h.style;if(h.selectorText==="."+b)c(k,f.TextStyle);else if(h.selectorText==="."+b+" .gx-qv-selected-element")f.SelectionColor=qv.util.css.resolveVariable(k.backgroundColor);else if(h.selectorText==="."+b+".qv-map"){f.BackgroundColor=qv.util.css.resolveVariable(k.backgroundColor);
f.Opacity=qv.util.css.resolveVariable(k.opacity)}else h.selectorText==="."+b+" .gx-qv-title"?c(k,f.Title.TextStyle):h.selectorText==="."+b+" .gx-qv-legend-box"?e(k,f.Legend.BoxStyle):h.selectorText==="."+b+" .gx-qv-legend-text"?c(k,f.Legend.TextStyle):h.selectorText==="."+b+" .gx-qv-series-labels-box"?e(k,f.SeriesLabels.BoxStyle):h.selectorText==="."+b+" .gx-qv-series-labels-text"?c(k,f.SeriesLabels.TextStyle):h.selectorText==="."+b+" .gx-qv-tooltip-box"?e(k,f.Tooltip.BoxStyle):h.selectorText==="."+
b+" .gx-qv-tooltip-text"&&c(k,f.Tooltip.TextStyle)}else h instanceof CSSImportRule?d(h.styleSheet.rules||h.styleSheet.cssRules,b,f):h instanceof CSSLayerBlockRule&&d(h.cssRules,b,f)}}var g=qv.util.GetThemeStyleSheet(a),g=g.rules||g.cssRules,a=qv.util.GetContainerControlClass(a),f={};d(g,a,f);b(f.TextStyle,f.Title.TextStyle);b(f.TextStyle,f.Legend.TextStyle);b(f.TextStyle,f.SeriesLabels.TextStyle);b(f.TextStyle,f.Tooltip.TextStyle);return f}(d);n.clear();var q={backgroundColor:qv.util.color.resolveColor(s.BackgroundColor,
s.Opacity),series:function(b,e){var d=a(b),f=gx.lang.gxBoolean(b.ShowValues)&&b.MapType===QueryViewerMapType.Bubble,g=b.getContainerControl(),h=Math.min(g.offsetWidth,g.offsetHeight),k=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture),g={type:"map",map:qv.map.getMapDirectory(b).mapKey,roam:true,scaleLimit:{min:1},selectedMode:b.SelectionAllowed()?"single":false,label:{show:false,formatter:"{c}"},emphasis:{label:{show:false},itemStyle:{borderWidth:0.5}},
select:{label:{show:false},itemStyle:{borderWidth:0.5}}};if(b.MapType===QueryViewerMapType.Choropleth){g.nameProperty="iso-code";if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character)g.data=c(b);l(g.label,e.SeriesLabels);g.select.itemStyle.areaColor=e.SelectionColor;g.emphasis.itemStyle.borderWidth=1;g.emphasis.itemStyle.areaColor=null;g.emphasis.itemStyle.borderColor=qv.util.color.lightenDarkenColor(d,50)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){var m=
b.Chart.Series.ByIndex[0].MaxValue;if(b.Chart.colorAxis.dataClasses.length===0)g.color=d;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=c(b);g.showLegendSymbol=false;g.markPoint={symbol:"circle",symbolSize:function(a){return Math.sqrt(a/m)*h/10},label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(d,
50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(d,100),borderWidth:2}}};l(g.markPoint.label,e.SeriesLabels)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){g.color=d;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=[];g.markPoint={symbol:"circle",label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(d,50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(d,100),borderWidth:2}}};l(g.markPoint.label,e.SeriesLabels)}return g}(d,s),title:{text:qv.util.getTranslation(d.Title),left:"center",textStyle:s.Title.TextStyle},dataRange:function(b,c){function e(a,b){var c=a;if(qv.util.isRTL(b))var d=a.split("-"),
c=d[0].trim(),d=d[1].trim(),c=c.split(" "),d=d.split(" "),c=d[1]+" "+d[0]+" - "+c[1]+" "+c[0];return c}function d(c){return c!=null?c:a(b)}var f,h=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture);if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length!=0){f=[];for(var k=0;k<b.Chart.colorAxis.dataClasses.length;k++){var l={},m=g(b,"",null)[0];b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Interval?
l={start:b.Chart.colorAxis.dataClasses[k].from,end:b.Chart.colorAxis.dataClasses[k].to,color:d(b.Chart.colorAxis.dataClasses[k].color),label:e(m[k],b)}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.Equal||b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.NotEqual?l={value:b.Chart.colorAxis.dataClasses[k].from,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterThan?
l={start:b.Chart.colorAxis.dataClasses[k].from,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.GreaterOrEqual?l={start:b.Chart.colorAxis.dataClasses[k].from-1,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==QueryViewerConditionOperatorSymbol.LessThan?l={end:b.Chart.colorAxis.dataClasses[k].to,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]}:b.Chart.colorAxis.dataClasses[k].Operator==
QueryViewerConditionOperatorSymbol.LessOrEqual&&(l={end:b.Chart.colorAxis.dataClasses[k].to+1,color:d(b.Chart.colorAxis.dataClasses[k].color),label:m[k]});f.push(l)}f={x:qv.util.isRTL(b)?"right":"left",orient:"vertical",splitList:f,textStyle:c.TextStyle}}else if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length==0){f={min:0,calculable:true,orient:"horizontal",left:"center",color:[a(b),"white"],textStyle:c.TextStyle,inverse:qv.util.isRTL(b),formatter:function(a){return qv.util.ApplyPicture(a,
b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,h)}};if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){k=b.Chart.Series.ByIndex[0].MaxValue;f.max=k}}if(b.MapType==QueryViewerMapType.Choropleth){if(c.BoxStyle.backgroundColor)f.backgroundColor=qv.util.color.resolveColor(c.BoxStyle.backgroundColor,c.BoxStyle.opacity);if(c.BoxStyle.borderColor)f.borderColor=c.BoxStyle.borderColor;if(c.BoxStyle.borderWidth)f.borderWidth=c.BoxStyle.borderWidth}return f}(d,s.Legend),tooltip:function(a,
b){var e=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),d;if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Choropleth)d={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++)if(n._coordSysMgr._coordinateSystems[0].regions[c].name==b.name)return Number.isNaN(b.value)?qv.util.isRTL(a)?qv.util.dom.createSpan(null,
"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,"0 : "+n._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : 0":qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)+" : "+n._coordSysMgr._coordinateSystems[0].regions[c].properties.name).outerHTML:
n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)}};else if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){coordData=c(a);d={trigger:"item",textStyle:b.TextStyle,formatter:function(b){var c=a.Chart.Series.ByIndex[0].Name;if(Number.isNaN(b.value))for(c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++){if(n._coordSysMgr._coordinateSystems[0].regions[c].name==
b.name)return n._coordSysMgr._coordinateSystems[0].regions[c].properties.name}else return b.value!=void 0?qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e)+" :"+c+"<br />"+b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]+"<br />"+c+": "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,e):qv.util.isRTL(a)?qv.util.dom.createSpan(null,"","","",{direction:"ltr",unicodeBidi:"bidi-override",whiteSpace:"nowrap"},null,b.data.coord[1]+" "+gx.getMessage("GXPL_QViewerMapLongitude")+"<br />"+b.data.coord[0]+" "+gx.getMessage("GXPL_QViewerMapLatitude")).outerHTML:gx.getMessage("GXPL_QViewerMapLatitude")+
" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]}}}if(b.BoxStyle.backgroundColor)d.backgroundColor=qv.util.color.resolveColor(b.BoxStyle.backgroundColor,b.BoxStyle.opacity);if(b.BoxStyle.borderColor)d.borderColor=b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)d.borderWidth=b.BoxStyle.borderWidth;return d}(d,s.Tooltip)};b(n);n.setOption(q);var p=qv.util.GetPictureProperties(d.Chart.Series.ByIndex[0].DataType,d.Chart.Series.ByIndex[0].Picture);n.lastSelected=
null;n.BubbleSelect=null;d.SelectionAllowed()&&h(n,d);d.ItemClick&&d.Metadata.Data[0].RaiseItemClick&&r(n,d);if(d.MapType==QueryViewerMapType.Bubble){var C=x(c(d),n,d),C=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?x(c(d),n,d):c(d),q=g(d,C,n),q={color:q[1],series:q[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:q[0],textStyle:s.Legend.TextStyle,formatter:function(a){return a}}};if(d.SelectionAllowed())n.on("click",function(a){if(a.componentType==="markPoint"){var b=
n.getOption(),c;if(d.Chart.colorAxis.dataClasses.length==0)c=b.series[0].color;else{c=d.Chart.Series.ByIndex[0].Points[a.dataIndex].Color.Color;f(c)&&(c="#"+c)}if(n.lastSelected!=a.dataIndex){if(n.lastSelected!=null)if(d.Chart.colorAxis.dataClasses.length==0)b.series[0].markPoint.data[n.lastSelected].itemStyle={color:b.series[0].color};else{colorLastBubble=d.Chart.Series.ByIndex[0].Points[n.lastSelected].Color.Color;f(colorLastBubble)&&(colorLastBubble="#"+colorLastBubble);b.series[0].markPoint.data[n.lastSelected].itemStyle=
{color:colorLastBubble}}b.series[0].markPoint.data[a.dataIndex].itemStyle={color:s.SelectionColor};n.lastSelected=a.dataIndex}else{b.series[0].markPoint.data[a.dataIndex].itemStyle={color:c};n.lastSelected=null}n.BubbleSelect=a.dataIndex;n.setOption(b)}});if(0!=d.Chart.colorAxis.dataClasses.length&&(s.Legend.BoxStyle.backgroundColor&&(q.legend.backgroundColor=qv.util.color.resolveColor(s.Legend.BoxStyle.backgroundColor,s.Legend.BoxStyle.opacity)),s.Legend.BoxStyle.borderColor&&(q.legend.borderColor=
s.Legend.BoxStyle.borderColor),s.Legend.BoxStyle.borderWidth))q.legend.borderWidth=s.Legend.BoxStyle.borderWidth;n.setOption(q)}else d.MapType==QueryViewerMapType.Choropleth&&(d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&(C=k(c(d),n,d),maxValue=Math.max.apply(Math,C.map(function(a){return a.value})),q={series:{data:C},dataRange:{max:maxValue}}),n.setOption(q),gx.lang.gxBoolean(d.ShowValues)&&(dataValues=d.Metadata.Axes[0].DataType==QueryViewerDataType.Character?x(c(d),n,d):x(C,n,d),
q={series:{markPoint:{symbol:"circle",symbolSize:function(){return 0},label:{show:!0,color:"black",formatter:function(a){return qv.util.ApplyPicture(a.value,d.Chart.Series.ByIndex[0].Picture,d.Chart.Series.ByIndex[0].DataType,p)}},data:dataValues}}},l(q.series.markPoint.label,s.SeriesLabels)),n.setOption(q));d.Charts=[n];(function(a){var b="try { qv.map.CheckMapSize("+a.me()+") } catch (e) {}";a.IntervalCheckChartSize=setInterval(b,500)})(d);d._ControlRenderedTo=d.RealType}return{tryToRenderMap:function(a){var b=
"";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(c,d){var f=!1;c!=d.xml.recordsetCacheKey&&(d.xml.recordsetCacheKey=c,f=!0);qv.util.anyError(c)?(b=qv.util.getErrorFromText(c),qv.util.renderError(d,b)):(f&&qv.services.parseRecordsetCacheKeyXML(d),qv.services.GetMetadataIfNeeded(d,function(c,d){var f=false;if(c!=d.xml.metadata){d.xml.metadata=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&
qv.services.parseMetadataXML(d);d.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(d,function(c,d){var f=false;if(c!=d.xml.data){d.xml.data=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&qv.services.parseDataXML(d);f=qv.util.GetContainerControlClasses(a);f!=""&&qv.util.SetUserControlClass(a,f);f=qv.util.ProcessDataAndMetadata(a);if(f==""){f=a.getContainerControl();qv.util.hideActivityIndicator(a);if(a.MapLibrary==QueryViewerMapLibrary.Highcharts){Highcharts.mapChart(f,
{chart:a.MapType==QueryViewerMapType.Bubble&&a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Bubble&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color?{map:qv.map.getMapDirectory(a).mapKey,styledMode:false}:{map:qv.map.getMapDirectory(a).mapKey,styledMode:true},title:{text:qv.util.getTranslation(a.Title)},mapNavigation:{enabled:true,
buttonOptions:{verticalAlign:"bottom"}},tooltip:q(a),series:g(a),colorAxis:n(a),legend:l(a)});a._ControlRenderedTo=a.RealType}else echarts.getMap(qv.map.getMapDirectory(a).mapKey)==null?qv.util.renderError(a,gx.getMessage("GXPL_QViewerNoMapSupport")):C(f,a)}else qv.util.renderError(a,f)}}):qv.util.renderError(d,d.Metadata.ParserResult.Message)}}))})},getMapDirectory:function(a){var b="QueryViewer/"+(a.MapLibrary===QueryViewerMapLibrary.Highchart?"highcharts/":"Echarts/"),c;c={};if(a.Region==QueryViewerRegion.Country)b=
b+"countries/"+a.Country.toLowerCase()+"-all.js",c="countries/"+a.Country.toLowerCase()+"/"+a.Country.toLowerCase()+"-all";else if(a.Region==QueryViewerRegion.Continent){c="custom/";b+="continents/";switch(a.Continent){case QueryViewerContinent.SouthAmerica:a="south-america";break;case QueryViewerContinent.NorthAmerica:a="north-america";break;default:a=a.Continent.toLowerCase()}c+=a;b+=a+".js"}else a.MapLibrary==QueryViewerMapLibrary.Highcharts?(c="custom/world-highres",b+="continents/world-highres.js"):
(c="world",b+="World/world.js");return c={mapKey:c,mapDir:b}},GetMetadataMap:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataMap:function(a){return a.xml.data},CheckMapSize:function(a){var b=a.getContainerControl();if(b.offsetWidth!=a.Chart._lastWidth||b.offsetHeight!=a.Chart._lastHeight)a.Charts[0].resize({width:b.offsetWidth+"px",height:b.offsetHeight+"px"}),a.Chart._lastWidth=b.offsetWidth,a.Chart._lastHeight=b.offsetHeight},IsAfricanCountry:function(a){return 0<="DZ AO BJ BW BF BI CM CV CF TD KM CD DJ EG GQ ER SZ ET GA GM GH GN GW CI KE LS LR LY MG MW ML MR MU MA MZ NA NE NG CG RW ST SN SC SL SO ZA SS SD TZ TG TN UG EH ZM ZW".split(" ").indexOf(a)},
IsAsianCountry:function(a){return 0<="AF AZ AM BH BD BT BN KH CN CY TL GE IN ID IR IQ IL JP JO KZ KW KG LA LB MY MV MN MM NP KP OM PK PS PH QA RU SA SG KR LK PS SY TW TJ TH TR TM AE UZ VN YE".split(" ").indexOf(a)},IsEuropeanCountry:function(a){return 0<="AL AD AT AZ AM BY BE BA BG HR CY CZ DK EE FO FI FR GE DE GR HU IS IE IT XK LV LI LT LU MT MD MC ME NL MK NO PL PT RO RU SM RS SK SI ES SE CH TR UA GB VA".split(" ").indexOf(a)},IsNorthAmericanCountry:function(a){return 0<="AI AG BB BZ BM VG CA CR CU DM DO SV GL GD GT HT HN JM MX NI PA PR LC KN VC BS US TT".split(" ").indexOf(a)},
IsOceanianCountry:function(a){return 0<="AU CK FJ ID KI MY MH FM NR NC NZ PW PG PH WS SB TK TO TV VU".split(" ").indexOf(a)},IsSouthAmericanCountry:function(a){return 0<="AR BO BR CL CO EC GF GY PY PE SR TT UY VE".split(" ").indexOf(a)},Select:function(a,b){var c=a.Charts[0].getOption();c.series[0].selectedMode="single";a.Charts[0].setOption(c);a._selectedValue=b[0].Value;a.Charts[0].dispatchAction({type:"select",seriesIndex:0,name:a._selectedValue});c=a.Charts[0].getOption();c.series[0].selectedMode=
!1;a.Charts[0].setOption(c)},Deselect:function(a){a.Charts[0].dispatchAction({type:"unselect",seriesIndex:0,name:a._selectedValue});a._selectedValue=void 0}}}();
